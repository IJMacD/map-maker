(this["webpackJsonpmap-maker"]=this["webpackJsonpmap-maker"]||[]).push([[0],{20:function(e,t,n){e.exports=n(31)},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t),n.d(t,"API_ROOT",(function(){return r}));var r="https://overpass-api.de/api/interpreter"},31:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),i=(n(25),n(3)),s=n.n(i),u=n(2),l=n(7),f=n(1);n(27);function d(e,t){var n=a.a.useState((function(){var n=localStorage.getItem(e);if(n)try{t=JSON.parse(n)}catch(r){}return t})),r=Object(f.a)(n,2),o=r[0],c=r[1];return[o,function(t){localStorage.setItem(e,JSON.stringify(t)),c(t)}]}var h=n(4),v=n(5),p=n(6),b=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(v.a)(this,e),this.type=t,this.tags=n,this.pseudoClasses=r,this.pseudoElement=a}return Object(p.a)(e,[{key:"toString",value:function(){return"".concat(this.type).concat(Object.entries(this.tags).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1],a=/^[<=>]/.test(r)?"":"=";return"[".concat(n).concat(a).concat(r,"]")})).join(""))}}]),e}();function g(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.type!==e.type&&("area"!==e.type||"way"!==t.type))return!1;var r=Object.entries(e.tags);if(r.length&&"undefined"===typeof t.tags)return!1;for(var a=0,o=r;a<o.length;a++){var c=Object(f.a)(o[a],2),i=c[0],s=c[1];if("undefined"===typeof t.tags[i])return!1;var u=/^[<=>]+/.exec(s);if(u){if(n){var l=u[0],d=O[l];if(!d)continue;var h=s.substr(u[0].length),v=isNaN(+h)?d(t.tags[i].localeCompare(h),0):d(+t.tags[i],+h);if(!v)return!1}}else if("*"!==s&&t.tags[i]!==s)return!1}return!0}function m(e){for(var t,n,r=/^\s*@match\s*\(([^\s)]+)\s*(:|=|<=|>=|<|>|and|or)\s*([^\s)]+)(?:\s*(=|<=|>=|<|>)\s*([^\s)]+))?\)\s*{/,a={mediaQueries:[],index:0},o=/^\s*}/;t=r.exec(e);){var c=x(t);a.index+=t[0].length;var i=y(e=e.substring(t[0].length)),s=i.rules,u=i.index;a.index+=u,e=e.substring(u),(n=o.exec(e))?(a.mediaQueries.push({type:"query",predicate:c,rules:s}),a.index+=n[0].length):console.log("Unterminated media query")}return a}function y(e){for(var t,n=/^\s*([^{}]+)\s*{([^{}]*)}/,r={rules:[],index:0},a=function(){var n={};t[2].split(";").map((function(e){return e.trim()})).filter((function(e){return e})).forEach((function(e){var t=e.indexOf(":"),r=e.substring(0,t).trim(),a=e.substring(t+1).trim();n[r]=a}));var a=b.parseMultiple(t[1]);a.length&&r.rules.push({type:"rule",selectors:a,declarations:n}),r.index+=t[0].length,e=e.substring(t[0].length)};t=n.exec(e);)a();return r}function k(e,t){var n,r=[],a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if("rule"===o.type){var c,i=o.declarations,s=Object(u.a)(o.selectors);try{for(s.s();!(c=s.n()).done;){var l=c.value;r.push({type:"rule",selector:l,declarations:i})}}catch(f){s.e(f)}finally{s.f()}}else j(o.predicate,t)&&r.push.apply(r,Object(h.a)(k(o.rules,t)))}}catch(f){a.e(f)}finally{a.f()}return r}function x(e){return e[4]?{left:{left:e[1],operator:e[2],right:e[3]},operator:"and",right:{left:e[3],operator:e[4],right:e[5]}}:{left:e[1],operator:e[2],right:e[3]}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e.left||"number"===typeof e.left?e.left:j(e.left,t),r="string"===typeof e.right||"number"===typeof e.right?e.right:j(e.right,t);"string"===typeof n&&n in t&&(t[n]instanceof Function&&(t[n]=t[n]()),n=t[n]),"string"===typeof r&&r in t&&(t[r]instanceof Function&&(t[r]=t[r]()),r=t[r]);var a=O[e.operator];return!!a&&a(n,r)}b.parse=function(e){var t=/^\s*([a-z]+)/.exec(e);if(!t)return null;var n=t[1];"rel"===n&&(n="relation");for(var r={},a=e.substring(t[0].length).trim(),o=/^\[([a-z0-9_-]+)(?:(=|<=|>=|<|>)([^[\]]+))?\]/i;;){var c=o.exec(a);if(!c)break;var i="="===c[2]?"":c[2];r[c[1]]=c[3]?i+c[3]:"*",a=a.substring(c[0].length)}for(var s=[],u=/^:([a-z-]+)(?:\(([^)]+)\))?/,l=function(){var e=u.exec(a);if(!e)return"break";var t=/^\s*([^\s)]+)\s*(:|=|<=|>=|<|>|and|or)\s*([^\s)]+)(?:\s*(=|<=|>=|<|>)\s*([^\s)]+))?/,n=e[2]?e[2].split(",").map((function(e){return t.test(e)?x(t.exec(e)):e})):[];s.push({name:e[1],params:n}),a=a.substring(e[0].length)};;){if("break"===l())break}var f=null,d=/^::([a-z-]+)?/;if(d.test(a)){var h=d.exec(a);f=h[1],a=a.substring(h[0].length)}return a.length?(console.log("Invalid selector: ".concat(e," unexpected part: '").concat(a,"'")),null):new b(n,r,s,f)},b.parseMultiple=function(e){return e.split(",").map(b.parse).filter((function(e){return e}))};var O={":":function(e,t){return e==t},"=":function(e,t){return e==t},">":function(e,t){return e>t},"<":function(e,t){return e<t},">=":function(e,t){return e>=t},"<=":function(e,t){return e<=t},and:function(e,t){return e&&t},or:function(e,t){return e||t}},w=n(14),E=n(8),S=n(11),M=n(10);function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function C(e,t,n,r){var a=Object(f.a)(e,2),o=a[0],c=a[1],i=Math.pow(2,t),s=256/(180/i),u=256/(180/i),l=Math.PI/4,d=n/2,h=r/2,v=180*Math.log(Math.tan(l+c/180*Math.PI/2))/Math.PI;return function(e,t){var n=e,r=180*Math.log(Math.tan(l+t/180*Math.PI/2))/Math.PI;return[d+(n-o)*s,h-(r-v)*u]}}function I(e){return e.reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(t){return t/e.length}))}function T(e){var t=N(e);return[t[0]+t[2]/2,t[1]+t[3]/2]}function L(e){return e[Math.floor((e.length-1)/2)]}function N(e){var t=e.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[0]),Math.max(e[3],t[1])]}),[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]);return[t[0],t[1],t[2]-t[0],t[3]-t[1]]}function F(e,t,n,r){return[[e,t],[e,t+r],[e+n,t+r],[e+n,t]]}function R(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n][0]*e[n+1][1]-e[n+1][0]*e[n][1];return t/2}function B(e){return Math.abs(R(e))}function z(e){return R(e)>0}function A(e){var t=e.length;if(!(t<3)){for(var n=0,r=1;r<t;r++){var a=e[r-1],o=e[r],c=e[(r+1)%t],i=Math.sign((o[0]-a[0])*(c[1]-o[1])-(o[1]-a[1])*(c[0]-o[0]));if(0===n)n=i;else if(0!==i&&n!==i)return!1}return!0}}function D(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]}function _(e){for(var t=0,n=1;n<e.length;n++){var r=e[n][0]-e[n-1][0],a=e[n][1]-e[n-1][1];t+=Math.sqrt(r*r+a*a)}return t}function K(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.selector;if(q(r,"is","convex")&&!A(t))return!1;if(q(r,"is","concave")&&A(t))return!1;if(q(r,"is","clockwise")&&z(t))return!1;if(q(r,"is","anti-clockwise")&&!z(t))return!1;if(q(r,"is","self-closing")&&n[0]!==n[t.length-1])return!1;var a,o=r.pseudoClasses.filter((function(e){return"has"===e.name})),c=Object(u.a)(o);try{for(c.s();!(a=c.n()).done;){var i=a.value;if("string"===typeof i.params[0])return!1;var s=i.params[0],l={area:function(){return B(t)},length:function(){return _(t)},width:function(){return N(t)[2]},height:function(){return N(t)[3]}},f=j(s,l);if(!f)return!1}}catch(d){c.e(d)}finally{c.f()}return!0}function q(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.pseudoClasses.some((function(e){return e.name===t&&e.params[0]===r[0]}))}function W(e,t,n){var r=e.declarations.content;if(!r)return"";for(var a=0,o=[];a<r.length;){var c=r.substr(a),i=/^\s+/.exec(c);if(i)a+=i[0].length;else if(i=/^"(.*?[^\\])"/.exec(c))o.push(i[1].replace(/\\"/g,'"').replace(/\\n/g,"\n")),a+=i[0].length;else if(i=/^tag\(([^)]+)\)/.exec(c))o.push(t.tags[i[1]]||""),a+=i[0].length;else{if(!(i=/^debug\(([^)]+)\)/.exec(c)))return"?";"type"===i[1]?o.push(t.type):"tags"===i[1]?o.push(Object.entries(t.tags).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return"[".concat(n,"=").concat(r,"]")})).join("\n")):"location"===i[1]&&"node"===t.type?o.push("(".concat(t.lon,",").concat(t.lat,")")):"node_count"!==i[1]||"way"!==t.type&&"area"!==t.type?"scale"===i[1]&&o.push(n.scale.toString()):o.push(t.nodes.length.toString()),a+=i[0].length}}return o.join("")}function Q(e,t){var n=e.split(","),r=Object(f.a)(n,4),a=r[0],o=r[1],c=r[2],i=r[3],s=t.split(","),u=Object(f.a)(s,4),l=u[0],d=u[1],h=u[2],v=u[3];return l>=a&&d>=o&&h<=c&&v<=i}function U(e){var t=e.split(",");return(+t[2]-+t[0])*(+t[3]-+t[1])}function V(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1],c=Object(f.a)(n,2),i=c[0],s=c[1],u=Math.pow(2,t),l=180/u*(i/256),d=180/u*(s/256);return[a-l,o-d,a+l,o+d].map((function(e){return e.toFixed(3)})).join(",")}var G=function(){function e(){Object(v.a)(this,e)}return Object(p.a)(e,[{key:"renderRule",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};n.forEach((function(e){return"node"===e.type&&(r[e.id]=e)}));var a={};n.forEach((function(e){return"way"===e.type&&(a[e.id]=e)}));var o=e.centre,c=e.zoom,i=e.width,s=e.height,l=C(o,c,i,s);this.globalSetup(e,t);var f=t.selector.type;switch(f){case"map":var d=F(0,0,i,s);t.selector.pseudoElement?this.renderPseudoElement(e,t,d,null,null):this.renderArea(e,t,d,null);break;case"current":if(e.current){var h=e.current;this.renderPoint(e,t,l(h.longitude,h.latitude))}break;case"gridlines":this.renderGridlines(e,t,l);break;case"dummy":this.renderPoint(e,t,[0,0]);break;default:var v,p=Object(u.a)(n);try{for(p.s();!(v=p.n()).done;){var b=v.value;if(g(t.selector,b))switch(f){case"node":if("node"!==b.type)continue;var m=l(b.lon,b.lat);t.selector.pseudoElement?this.renderPseudoElement(e,t,[m],b,[b]):this.renderPoint(e,t,m,b);break;case"way":case"area":if("way"!==b.type)continue;var y=b.nodes.map((function(e){return r[e]})),k=y.map((function(e){return l(e.lon,e.lat)}));if(!K(t,k,b,y))continue;t.selector.pseudoElement?this.renderPseudoElement(e,t,k,b,y):"area"===f?this.renderArea(e,t,k,b):this.renderLine(e,t,k,b);break;case"relation":if("relation"!==b.type)continue}}}catch(x){p.e(x)}finally{p.f()}}}},{key:"renderPoint",value:function(e,t,n){}},{key:"renderLine",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.renderAreaLine(e,t,n,L,r)}},{key:"renderArea",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;0!==n.length&&(D(n)||(n=[].concat(Object(h.a)(n),[n[0]])),this.renderAreaLine(e,t,n,T,r))}},{key:"renderAreaLine",value:function(e,t,n,r){}},{key:"renderPseudoElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(t.selector.pseudoElement){case"centre":case"center":var a=T(n);this.renderPoint(e,t,a,r);break;case"mid-point":var o=L(n);this.renderPoint(e,t,o,r);break;case"average-point":var c=I(n);this.renderPoint(t,c,r,e);break;case"start":this.renderPoint(e,t,n[0],r);break;case"end":this.renderPoint(e,t,n[n.length-1],r);break;case"centre-of-mass":break;case"bounding-box":var i=N(n),s=F.apply(void 0,Object(h.a)(i));this.renderArea(e,t,s,r);break;case"content-box":var l=e.scale,d=n[0];"way"===t.selector.type?d=L(n):"area"===t.selector.type&&(d=T(n));var v=d,p=Object(f.a)(v,2),b=p[0],g=p[1],m=W(t,r,e);if(!m)return;var y,k,x=Number.NEGATIVE_INFINITY,j=Number.NaN,O=g,w=Object(u.a)(m.split("\n"));try{for(w.s();!(k=w.n()).done;){var E=k.value,S=this.measureText(e,t,E);x=Math.max(x,S.width),isNaN(j)&&(j=g-S.ascending),y=O+S.descending,O+=S.height}}catch(B){w.e(B)}finally{w.f()}var M=t.declarations.padding?parseFloat(t.declarations.padding)*l:0;"center"===t.declarations["text-align"]||"centre"===t.declarations["text-align"]?b-=x/2:"right"===t.declarations["text-align"]&&(b-=x);var P=[[b-M,j-M],[b-M,y+M],[b+x+M,y+M],[b+x+M,j-M]];P.push(P[0]),this.renderAreaLine(e,t,P,(function(){return d}),r);break;case"decimate":if("way"===t.selector.type){var C=n.length-1,R=n.filter((function(e,t){return t%10===0||t===C}));this.renderLine(e,t,R,r)}}}},{key:"renderGridlines",value:function(e,t,n){var r=t.selector.pseudoClasses.find((function(e){return"vertical"===e.name})),a=t.selector.pseudoClasses.find((function(e){return"horizontal"===e.name})),o=e.width,c=e.height,i=V(e.centre,e.zoom,[o,c]).split(",");if(r)for(var s=parseFloat(r.params[0]),u=1/s,l=Math.ceil(Math.log10(u)),f=Math.floor(+i[0]*u)/u,d=Math.ceil(+i[2]*u)/u,h=Math.floor(+i[1]*u)/u,v=Math.ceil(+i[3]*u)/u,p=f;p<=d;p+=s){var b=[n(p,h),n(p,(h+v)/2),n(p,v)];this.renderLine(e,t,b,{type:"way",id:0,nodes:[],tags:{name:p.toFixed(l)}})}if(a)for(var g=parseFloat(a.params[0]),m=1/g,y=Math.ceil(Math.log10(m)),k=Math.floor(+i[0]*m)/m,x=Math.ceil(+i[2]*m)/m,j=Math.floor(+i[1]*m)/m,O=Math.ceil(+i[3]*m)/m,w=j;w<=O;w+=g){var E=[n(k,w),n((k+x)/2,w),n(x,w)];this.renderLine(e,t,E,{type:"way",id:0,nodes:[],tags:{name:w.toFixed(y)}})}}},{key:"clear",value:function(e){}},{key:"globalSetup",value:function(e,t){}},{key:"measureText",value:function(e,t,n){return{width:0,ascending:0,descending:0,height:0}}}]),e}();function J(e,t){var n,r,a=e.declarations.fill,o=e.declarations.stroke;if(o){var c=o.replace(/\([^)]*\)/g,(function(e){return" ".repeat(e.length)}));c=(c=c.replace(/#[0-9a-f]{3}/i,"    ")).replace(/#[0-9a-f]{6}/i,"       ");var i=/(\d+(?:\.\d+)?)\s*(?:px)?/.exec(c);i&&(n=+i[1]*t,o=o.replace(i[0],""))}return e.declarations["stroke-width"]&&(n=+e.declarations["stroke-width"]*t),e.declarations["stroke-dash"]&&(r=e.declarations["stroke-dash"].split(" ").map((function(e){return+e*t}))),{fillStyle:a,strokeStyle:o,lineWidth:n,lineDash:r}}function Y(e,t,n){var r=J(t,n),a=r.fillStyle,o=r.strokeStyle,c=r.lineWidth,i=r.lineDash;e.fillStyle=a,e.strokeStyle=o,e.lineWidth=c,i&&e.setLineDash(i)}function H(e,t,n){var r=Object(f.a)(n,2),a=r[0],o=r[1],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4?arguments[4]:void 0;Y(e,t,i.scale);var s=W(t,c,i);X(e,t,i.scale);var l,d=Object(u.a)(s.split("\n"));try{for(d.s();!(l=d.n()).done;){var h=l.value;o+=Z(e,t,h,a,o,i)}}catch(v){d.e(v)}finally{d.f()}}function Z(e,t,n,r,a,o){var c=e.measureText(n);if(t.declarations["text-align"]){var i=c.width;"center"===t.declarations["text-align"]||"centre"===t.declarations["text-align"]?r-=i/2:"right"===t.declarations["text-align"]&&(r-=i)}return t.declarations["stroke-width"]&&(e.lineWidth=parseFloat(t.declarations["stroke-width"])*o.scale),t.declarations["text-stroke"]&&(e.strokeStyle=t.declarations["text-stroke"],e.strokeText(n,r,a)),!t.declarations["text-color"]&&t.declarations["text-stroke"]||(e.fillStyle=t.declarations["text-color"],e.fillText(n,r,a)),c.actualBoundingBoxAscent+c.actualBoundingBoxDescent}function X(e,t,n){var r="".concat(10*n,"px"),a="normal",o="sans-serif";t.declarations.font?e.font=t.declarations.font.replace(/\d+(?:\.\d+)?/,(function(e){return"".concat(+e*n)})):(t.declarations["font-size"]&&(r=t.declarations["font-size"].replace(/^\d[\d.]*/,(function(e){return"".concat(+e*n)}))),t.declarations["font-weight"]&&(a=t.declarations["font-weight"]),t.declarations["font-family"]&&(o=t.declarations["font-family"]),e.font="".concat(a," ").concat(r," ").concat(o))}function $(e,t,n){if(t.declarations.transform)for(var r,a=/\s*([a-z]+)\(([^)]*)\)\s*/g,o=t.declarations.transform;r=a.exec(o);){var c=r[1],i=r[2].split(",").map((function(e){return{value:parseFloat(e)*n,unit:e.replace(/[-\d.\s]/g,"")}}));switch(c){case"matrix":e.transform.apply(e,Object(h.a)(i.map((function(e){return e.value}))));break;case"rotate":var s=i[0],u=s.value,l=s.unit;"deg"===l?u*=Math.PI/180:"turn"===l&&(u*=2*Math.PI),e.rotate(u);break;case"scale":var f=i[0].value,d=i[1]?i[1].value:f;e.scale(f,d);break;case"translate":e.translate.apply(e,Object(h.a)(i.map((function(e){return e.value}))));break;case"skew":var v=i[0],p=v.value,b=v.unit;"rad"===b?p=Math.tan(p):"deg"===b&&(p=Math.tan(p*Math.PI/180));var g=0;if(i[1]){var m=i[1],y=m.value,k=m.unit;"rad"===k?y=Math.tan(y):"deg"===k&&(y=Math.tan(y*Math.PI/180)),g=y}e.transform(1,g,p,1,0,0)}}}function ee(e,t,n){var r=Object(f.a)(n,2),a=r[0],o=r[1],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.save();var s=i.scale;if(Y(e,t,s),"absolute"===t.declarations.position&&(a=(parseFloat(t.declarations.left)||0)*s,o=(parseFloat(t.declarations.top)||0)*s),e.translate(a,o),$(e,t,s),t.declarations.size){e.beginPath();var u=+t.declarations.size*s;e.ellipse(0,0,u,u,0,0,2*Math.PI),t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke()}t.declarations.path&&(e.beginPath(),te(e,t.declarations.path,s),t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke());var l=/url\(([^)]+)\)(?:\s+([^\s]+)(?:\s+([^\s]+))?)?/;if(l.test(t.declarations.icon)){var d=l.exec(t.declarations.icon),h=d[1],v=new Image;v.src=h;var p=parseFloat(d[2]),b=parseFloat(d[3]);v.addEventListener("load",(function(){if(e.save(),e.translate(a,o),p){var t=isNaN(b)?v.height*(p/v.width):b;e.drawImage(v,0,0,p*s,t*s)}else e.drawImage(v,0,0);e.restore()}))}t.declarations.content&&H(e,t,[0,0],c,i),e.restore()}function te(e,t,n){for(var r,a,o,c=/([MLQCVHZ])\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?/gi;r=c.exec(t);){var i=parseFloat(r[2])*n,s=parseFloat(r[3])*n,u=parseFloat(r[4])*n,l=parseFloat(r[5])*n,f=parseFloat(r[6])*n,d=parseFloat(r[7])*n;a||(a=[i,s]),"M"===r[1]?(o=[i,s],e.moveTo(i,s)):"L"===r[1]?(o=[i,s],e.lineTo(i,s)):"Q"===r[1]?(o=[u,l],e.quadraticCurveTo(i,s,u,l)):"C"===r[1]?(o=[f,d],e.bezierCurveTo(i,s,u,l,f,d)):"Z"===r[1]?(o=a,e.lineTo.apply(e,Object(h.a)(o))):"V"===r[1]?(o=[o[0],i],e.lineTo.apply(e,Object(h.a)(o))):"H"===r[1]?(o=[i,o[1]],e.lineTo.apply(e,Object(h.a)(o))):"m"===r[1]?(o=[o[0]+i,o[1]+s],e.moveTo.apply(e,Object(h.a)(o))):"l"===r[1]?(o=[o[0]+i,o[1]+s],e.lineTo.apply(e,Object(h.a)(o))):"q"===r[1]?(e.quadraticCurveTo(o[0]+i,o[1]+s,o[0]+u,o[1]+l),o=[o[0]+u,o[1]+l]):"c"===r[1]?(o=[f,d],e.bezierCurveTo(o[0]+i,o[1]+s,o[0]+u,o[1]+l,o[0]+f,o[1]+d),o=[o[0]+f,o[1]+d]):"z"===r[1]?(o=a,e.lineTo.apply(e,Object(h.a)(a))):"v"===r[1]?(o=[o[0],o[1]+i],e.lineTo.apply(e,Object(h.a)(o))):"h"===r[1]&&(o=[o[0]+i,o[1]],e.lineTo.apply(e,Object(h.a)(o)))}}var ne=function(){function e(){Object(v.a)(this,e),this.sets={}}return Object(p.a)(e,[{key:"clear",value:function(){this.sets={}}},{key:"add",value:function(e,t){this.sets[e]||(this.sets[e]=[]);var n,r=Object(u.a)(this.sets[e]);try{for(r.s();!(n=r.n()).done;){if(re(t,n.value))return!1}}catch(a){r.e(a)}finally{r.f()}return this.sets[e].push(t),!0}}],[{key:"getCollisionSystem",value:function(){return this.singleton||(this.singleton=new e),this.singleton}}]),e}();function re(e,t){var n=e[0],r=e[1],a=e[0]+e[2],o=e[1]+e[3],c=t[0],i=t[1],s=t[0]+t[2],u=t[1]+t[3];return n<s&&a>c&&r<u&&o>i}function ae(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(0!==n.length){if(t.declarations["collision-set"]){var c=N(n);if(t.declarations["collision-size"]){var i=/(\d+\.?\d*)%/.exec(t.declarations["collision-size"]),s=+i[1]/100,u=c[2],l=c[3];c[0]+=(1-s)*u/2,c[1]+=(1-s)*l/2,c[2]=u*s,c[3]=l*s}var f=ne.getCollisionSystem();if(!f.add(t.declarations["collision-set"],c)){var d=t.declarations["collision-policy"]||"hide";if("hide"===d)return}}e.save(),Y(e,t,o.scale);var h=0,v=0;if(t.declarations.transform){var p=r(n);h=p[0],v=p[1],e.translate(h,v),$(e,t,o.scale)}e.beginPath(),e.moveTo(n[0][0]-h,n[0][1]-v);for(var b=1;b<n.length;b++)e.lineTo(n[b][0]-h,n[b][1]-v);t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke(),e.restore(),(t.declarations.content||t.declarations.size||t.declarations.path||t.declarations.icon)&&(e.save(),ee(e,t,r(n),a,o),e.restore())}}var oe=function(e){Object(S.a)(n,e);var t=Object(M.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).canvas=e,r}return Object(p.a)(n,[{key:"clear",value:function(e){var t=e.width,n=e.height;this.canvas.width=t,this.canvas.height=n}},{key:"renderRule",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=this.canvas.getContext("2d");a.save(),Object(w.a)(Object(E.a)(n.prototype),"renderRule",this).call(this,e,t,r),a.restore()}},{key:"globalSetup",value:function(e,t){var n=e.scale,r=this.canvas.getContext("2d");if(t.declarations.opacity&&(r.globalAlpha=+t.declarations.opacity),"relative"===t.declarations.position){var a=(parseFloat(t.declarations.top)||0)*n,o=(parseFloat(t.declarations.left)||0)*n;r.translate(o,a)}}},{key:"renderPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.canvas.getContext("2d");ee(a,t,n,r,e)}},{key:"renderAreaLine",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=this.canvas.getContext("2d");ae(o,t,n,r,a,e)}},{key:"measureText",value:function(e,t,n){var r=this.canvas.getContext("2d");X(r,t,e.scale);var a=r.measureText(n),o=a.width,c=a.actualBoundingBoxDescent,i=a.actualBoundingBoxAscent;return{width:o,ascending:i,descending:c,height:i+c}}}]),n}(G),ce=function(){return new Worker(n.p+"static/js/render-worker.30a7101a.worker.js")},ie=function(e){Object(S.a)(n,e);var t=Object(M.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).canvas=e.transferControlToOffscreen(),r.worker=new ce,r.worker.postMessage({canvas:r.canvas},[r.canvas]),r}return Object(p.a)(n,[{key:"clear",value:function(e){this.worker.postMessage({method:"clear",context:e})}},{key:"renderRule",value:function(e,t,n){this.worker.postMessage({method:"renderRule",context:e,rule:t})}}]),n}(G),se=n(13);function ue(e,t,n,r){if(0!==n.length){if(t.declarations["collision-set"]){var a=N(n),o=ne.getCollisionSystem();if(!o.add(t.declarations["collision-set"],a)){var c=t.declarations["collision-policy"]||"hide";if("hide"===c)return}}var i={type:"path"},s=0,u=0;if(t.declarations.transform){var l=r(n);s=l[0],u=l[1],i.transform=t.declarations.transform}var f=[];f.push("M ".concat((n[0][0]-s).toFixed(2)," ").concat((n[0][1]-u).toFixed(2)));for(var d=1;d<n.length;d++)f.push("L ".concat((n[d][0]-s).toFixed(2)," ").concat((n[d][1]-u).toFixed(2)));i.d=f.join(" "),e.elements.push(i),t.declarations.content||t.declarations.size||t.declarations.path||t.declarations.icon}}var le=function(e){Object(S.a)(n,e);var t=Object(M.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).layers=[],a.width=e,a.height=r,a.currentLayer=null,a}return Object(p.a)(n,[{key:"clear",value:function(){this.layers.length=0}},{key:"renderRule",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.currentLayer={elements:[]};var a=J(t);this.currentLayer.stroke=a.strokeStyle,this.currentLayer.fill=a.fillStyle||"none",de(this.currentLayer,t,e.scale),Object(w.a)(Object(E.a)(n.prototype),"renderRule",this).call(this,e,t,r),this.layers.push(this.currentLayer)}},{key:"renderAreaLine",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;ue(this.currentLayer,t,n,r,a,e)}},{key:"toString",value:function(){return this.getTextParts().join("")}},{key:"toBlob",value:function(){return new Blob(this.getTextParts())}},{key:"getTextParts",value:function(){var e=[];e.push('<svg version="1.1" viewBox="0 0 '.concat(this.width," ").concat(this.height,'" width="').concat(this.width,'" height="').concat(this.height,'" xmlns="http://www.w3.org/2000/svg">\n'));var t,n=Object(u.a)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.elements,o=Object(se.a)(r,["elements"]);e.push("<g ".concat(fe(o),">\n"));var c,i=Object(u.a)(a);try{for(i.s();!(c=i.n()).done;){var s=c.value,l=s.type,f=Object(se.a)(s,["type"]);e.push("<".concat(l," ").concat(fe(f)," />\n"))}}catch(d){i.e(d)}finally{i.f()}e.push("</g>\n")}}catch(d){n.e(d)}finally{n.f()}return e.push("</svg>"),e}}]),n}(G);function fe(e){return Object.entries(e).filter((function(e){var t=Object(f.a)(e,2);t[0];return"undefined"!==typeof t[1]})).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')})).join(" ")}function de(e,t,n){if(t.declarations.opacity&&(e.opacity=+t.declarations.opacity),"relative"===t.declarations.position){var r=(parseFloat(t.declarations.top)||0)*n,a=(parseFloat(t.declarations.left)||0)*n;e.translate=[a,r]}}var he=n(19),ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OverpassElements";Object(v.a)(this,e);var n=indexedDB.open(t);n.addEventListener("upgradeneeded",(function(e){var t=e.target.result;t.createObjectStore("nodes",{keyPath:"id"}),t.createObjectStore("elements").createIndex("selectorIndex",["selector","area","bbox"],{unique:!1})})),this.db=new Promise((function(e,t){n.addEventListener("success",(function(t){var n=t.target;e(n.result)})),n.addEventListener("error",t)}))}return Object(p.a)(e,[{key:"saveNodes",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:n=e.sent,r=n.transaction("nodes","readwrite").objectStore("nodes"),a=Object(u.a)(t);try{for(a.s();!(o=a.n()).done;)c=o.value,r.put(c)}catch(i){a.e(i)}finally{a.f()}case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNode",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){var a=n.transaction("nodes","readonly").objectStore("nodes").get(t);a.addEventListener("success",(function(t){return e(a.result)})),a.addEventListener("error",(function(e){return r(e)}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNodes",value:function(e){var t=this;return Promise.all(e.map((function(e){return t.getNode(e)})))}},{key:"getElements",value:function(e,t){var n=pe(e,t);return this.getElementsByKey(n)}},{key:"getElementsByKey",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){var a=n.transaction("elements","readonly").objectStore("elements").get(t);a.addEventListener("success",(function(t){return e(a.result)})),a.addEventListener("error",r)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return r=e.sent,e.abrupt("return",new Promise((function(e,a){var o=r.transaction("elements","readonly").objectStore("elements").index("selectorIndex"),c=IDBKeyRange.bound([n,0,"0"],[n,Number.MAX_VALUE,"999999999999999999"]),i=o.openKeyCursor(c),s=0,u=9*U(t);i.addEventListener("success",(function(r){var a=i.result;if(a){var o=a.key,c=a.primaryKey,l=o[2],f=o[1];if(s++,console.debug("Checking index #".concat(s," for ").concat(n)),Q(l,t)&&f<u)return console.debug("".concat(n," found after checking ").concat(s," records")),void e(c.toString());a.continue()}else console.debug("".concat(n," not found after checking ").concat(s," records")),e(null)})),i.addEventListener("error",a)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return a=e.sent,o=pe(t,n),c=U(t),e.abrupt("return",new Promise((function(e,i){var s=a.transaction("elements","readwrite").objectStore("elements").put(Object(he.a)({selector:n,bbox:t,area:c},r),o);s.addEventListener("success",(function(){console.debug("Saved ".concat(n,"/").concat(t," to database with ").concat(r.elements.length," elements")),e()})),s.addEventListener("error",i)})));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,n){var r=t.transaction("elements","readwrite").objectStore("elements").clear();r.onsuccess=e,r.onerror=n})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pe(e,t){var n=e.split(",").map((function(e){return(+e).toFixed(3)})).join(",");return"".concat(t,"/").concat(n)}var be=n(28).API_ROOT,ge=/^(node|way|rel(?:ation)?|area)/,me=/^(way|rel(?:ation)?|area)/,ye=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(v.a)(this,e),this.elements=new Map,this.bbox=t,this.database=new ve,this.fetchMap={},this.currentJob=Promise.resolve()}return Object(p.a)(e,[{key:"setBBox",value:function(e){this.bbox&&!Q(this.bbox,e)&&this.elements.clear(),this.bbox=e}},{key:"preLoadElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.jobs(Object(l.a)(s.a.mark((function e(){var r,a,o,c,i,l,d,v,p,b,m,y,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.bbox,n.bbox){e.next=3;break}throw Error("No bounding box specified");case 3:for(a={},t.forEach((function(e){return a[xe(e)]=e})),console.debug("Preloading Elements: ".concat(t.length," requested (").concat(Object.keys(a).length," unique)")),o=0,c=Object.entries(a);o<c.length;o++)i=Object(f.a)(c[o],2),l=i[0],d=i[1],ge.test(d.type)||delete a[l];for(console.debug("Preloading Elements: ".concat(Object.keys(a).length," are Overpass Elements")),v=0,p=Object.keys(a);v<p.length;v++)b=p[v],n.elements.has(b)&&delete a[b];return console.debug("Preloading Elements: ".concat(Object.keys(a).length," not in HashMap")),e.next=12,Promise.all(Object.keys(a).map((function(e){return n.database.searchElements(r,e).then((function(t){t&&delete a[e]}))})));case 12:if(console.debug("Preloading Elements: ".concat(Object.keys(a).length," not in Database")),0!==Object.keys(a).length){e.next=15;break}return e.abrupt("return",0);case 15:return e.next=17,n.tryQuery(Object.values(a));case 17:return m=e.sent,console.log("Preloading Elements: Fetched ".concat(m.length," elements from Server")),y={},m.forEach((function(e){return"node"===e.type&&(y[e.id]=e)})),k={},m.forEach((function(e){return"way"===e.type&&(k[e.id]=e)})),e.next=25,Promise.all(Object.values(a).map((function(e){var t=m.filter((function(t){return g(e,t,!1)}));if("relation"===e.type){var a,o=t.slice(),c=[],i=Object(u.a)(o);try{for(i.s();!(a=i.n()).done;){var s=a.value.members.map((function(e){return e.ref}));c.push.apply(c,Object(h.a)(s.map((function(e){return k[e]}))))}}catch(j){i.e(j)}finally{i.f()}t.push.apply(t,c);for(var l=0,f=c;l<f.length;l++){var d=f[l];t.push.apply(t,Object(h.a)(d.nodes.map((function(e){return y[e]}))))}}else if("way"===e.type||"area"===e.type){var v,p=t.slice(),b=Object(u.a)(p);try{for(b.s();!(v=b.n()).done;){var x=v.value;t.push.apply(t,Object(h.a)(x.nodes.map((function(e){return y[e]}))))}}catch(j){b.e(j)}finally{b.f()}}return n.elements.set(xe(e),Promise.resolve(t)),n.database.saveElements(r,xe(e),{elements:t,cached:Date.now()})})));case 25:return e.abrupt("return",m.length);case 26:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e){var t=this;if(this.bbox.split(",").map((function(e){return+e})).some(isNaN))throw Error("Invalid BBox");var n=e.map(ke),r="[out:json][bbox];\n(".concat(n.join(""),"\n);\nout;"),a="".concat(be,"?data=").concat(r.replace(/\s/,""),"&bbox=").concat(function(e){var t=e.split(",").map((function(e){return+e}));return"".concat(je(t[0],-180,180),",").concat(je(t[1],-90,90),",").concat(je(t[2],-180,180),",").concat(je(t[3],-90,90))}(this.bbox));return this.fetchMap[a]||(this.fetchMap[a]=fetch(a.toString()).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){return e.elements})),this.fetchMap[a].finally((function(){return delete t.fetchMap[a]}))),this.fetchMap[a]}},{key:"tryQuery",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.query(e).catch((function(r){if(429!==r)throw Error("Bad Response");if(n>0)return P(1e4).then((function(){return t.tryQuery(e,n-1)}));throw Error("Too many retries fetching data")}))}},{key:"getElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o,c,i,u=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge.test(t.type)){e.next=2;break}return e.abrupt("return");case 2:if(this.bbox){e.next=4;break}return e.abrupt("return");case 4:if(n=xe(t),!this.elements.has(n)){e.next=7;break}return e.abrupt("return",this.elements.get(n));case 7:return e.next=9,this.database.getElements(this.bbox,n);case 9:if(!(r=e.sent)){e.next=14;break}return a=r.elements,this.elements.set(n,Promise.resolve(a)),e.abrupt("return",a);case 14:return e.next=16,this.database.searchElements(this.bbox,n);case 16:if(!(o=e.sent)){e.next=21;break}return c=this.database.getElementsByKey(o).then((function(e){return e.elements})),this.elements.set(n,c),e.abrupt("return",c);case 21:return i=this.tryQuery([t]),this.elements.set(n,i),i.catch((function(){return u.elements.delete(n)})),i.then((function(e){u.database.saveElements(u.bbox,n,{elements:e,cached:Date.now()})})),e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"jobs",value:function(e){return this.currentJob=this.currentJob.then((function(){return e()})),this.currentJob}},{key:"clearCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.elements.clear(),e)return this.database.clear()}}]),e}();function ke(e){var t=me.test(e.type)?">;":"";return"".concat(xe(e),";").concat(t)}function xe(e){var t="area"===e.type?"way":e.type,n=Object.entries(e.tags).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return/^[<=>]+/.test(r)||"*"===r?"[".concat(n,"]"):"[".concat(n,"=").concat(r,"]")}));return"".concat(t).concat(n.join(""))}function je(e,t,n){return Math.max(t,Math.min(e,n))}function Oe(e,t){var n=Object(r.useState)(e),a=Object(f.a)(n,2),o=a[0],c=a[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),o}function we(e){var t=e.value,n=e.onChange,r=Object(se.a)(e,["value","onChange"]);return a.a.createElement("textarea",Object.assign({value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){var r=e.key,a=e.currentTarget,o=e.shiftKey;if("Tab"===r){e.preventDefault();var c=a.selectionStart,i=t.lastIndexOf("\n",c-1)+1;if(o){if("    "===t.substr(i,4)){var s=t.substring(0,i)+t.substring(i+4);n(s),setTimeout((function(){return a.setSelectionRange(c-4,c-4)}),10)}}else{var u=4-(c-i)%4,l=t.substring(0,c)+"    ".substring(0,u)+t.substring(c);n(l),setTimeout((function(){return a.setSelectionRange(c+u,c+u)}),10)}}else if("Enter"===r){e.preventDefault();var f=a.selectionStart,d="{"===t[f-1],h=t.lastIndexOf("\n",f-1)+1,v=t.substring(h,f).match(/^ */),p=f+v[0].length+1+(d?4:0),b=t.substring(0,f)+"\n"+(d?"    ":"")+v[0]+t.substring(f);n(b),setTimeout((function(){return a.setSelectionRange(p,p)}),10)}}},r))}var Ee=n(18),Se=n(17);n(30);var Me=function(){var e=d("USER_STYLE","node[amenity=post_box] {\n\tfill: black;\n\tsize: 2;\n}"),t=Object(f.a)(e,2),n=t[0],r=t[1],o=d("USER_CENTRE","7.1,50.7"),c=Object(f.a)(o,2),i=c[0],s=c[1],u=d("USER_SCALE",14),l=Object(f.a)(u,2),v=l[0],p=l[1],b=function(){var e=a.a.useState(),t=Object(f.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){navigator.geolocation.getCurrentPosition(r)}),[]),a.a.useEffect((function(){var e=navigator.geolocation.watchPosition(r);return function(){return navigator.geolocation.clearWatch(e)}}),[]),n}(),g=a.a.useRef(),x=a.a.useRef(new ye),j=a.a.useState(null),O=Object(f.a)(j,2),w=O[0],E=O[1],S=a.a.useState(""),M=Object(f.a)(S,2),P=M[0],C=M[1],I=a.a.useState(!1),T=Object(f.a)(I,2),L=T[0],N=T[1],F=a.a.useState(0),R=Object(f.a)(F,2),B=R[0],z=R[1],A=a.a.useRef(),D=a.a.useRef({executables:{"clear-cache":function(){x.current&&x.current.clearCache(!0)}}}),_=function(){var e=a.a.useState(0),t=Object(f.a)(e,2),n=t[0],r=t[1];return[n,function(){return r((function(e){return e+1}))}]}(),K=Object(f.a)(_,2),q=K[0],W=K[1];a.a.useEffect((function(){var e=D.current.executables;e.render=W,e.get=function(e){return"centre"===e?i:"zoom"===e?v:"myPos"===e?"".concat(b.coords.longitude,",").concat(b.coords.latitude):void 0},e.set=function(e,t){return"centre"===e?(s(t),!0):"zoom"===e&&(p(t),!0)},e["enable-worker"]=function(){localStorage.setItem("worker-enabled","on"),window.location.reload()},e["disable-worker"]=function(){localStorage.removeItem("worker-enabled"),window.location.reload()}}),[W,i,v,s,p,b]);var Q=a.a.useState(!1),U=Object(f.a)(Q,2),G=U[0],J=U[1],Y=g.current||{clientWidth:1e3,clientHeight:1e3},H=Y.clientWidth,Z=Y.clientHeight,X=H*devicePixelRatio,$=Z*devicePixelRatio,ee=Oe(i,500),te=Oe(v,500),ne=a.a.useMemo((function(){return V(ee.split(",").map((function(e){return+e})),te,[H,Z])}),[ee,te,H,Z]),re=Oe(n,500),ae=a.a.useMemo((function(){return function(e){for(var t={rules:[]},n=e.length;n>0;){var r,a,o=y(e);(r=t.rules).push.apply(r,Object(h.a)(o.rules));var c=m(e=e.substring(o.index).trim());if((a=t.rules).push.apply(a,Object(h.a)(c.mediaQueries)),(e=e.substring(c.index).trim()).length===n){console.log("Got stuck parsing style at: "+e);break}n=e.length}return t}(re)}),[re]);a.a.useEffect((function(){return x.current.setBBox(ne)}),[ne]);var ce={centre:ee.split(",").map((function(e){return+e})),zoom:te,bbox:ne,scale:devicePixelRatio,width:X,height:$},se=k(ae.rules,ce);if(a.a.useEffect((function(){var e=function(e){return"k"===e.key&&e.ctrlKey&&e.altKey&&J(!G)};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[G]),se.some((function(e){return"current"===e.selector.type}))){var ue=(b||{coords:{}}).coords,le=ue.longitude,fe=ue.latitude;ce.current={longitude:le,latitude:fe}}function de(e,t){var n=ee.split(",").map((function(e){return+e})),r=ne.split(",").map((function(e){return+e})),a=(r[2]-r[0])/2,o=(r[3]-r[1])/2,c=Te(n[0]+e*a,n[1]+t*o);s(c)}function he(e){if(!L){N(!0);var t=function(){return N(!1)};"png"===e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.toBlob((function(e){Ce(e,"map.png"),t&&t()}))}(g.current,t):function(e,t,n){Pe.apply(this,arguments)}(ce,ae,x.current,t)}}return g.current&&!A.current&&(window.Worker&&g.current.transferControlToOffscreen&&localStorage.getItem("worker-enabled")?A.current=new ie(g.current):A.current=new oe(g.current)),Object(Ee.a)((function(){var e={currentEffect:!0};return function(e,t,n,r,a,o,c,i){Le.apply(this,arguments)}(se,x.current,A.current,ce,E,C,z,e),function(){e.currentEffect=!1}}),[ee,te,se,ce,q]),a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"sidebar"},a.a.createElement("div",{className:"controls"},a.a.createElement("button",{onClick:function(){return de(-1,0)}},"\u23f4"),a.a.createElement("button",{onClick:function(){return de(1,0)}},"\u23f5"),a.a.createElement("button",{onClick:function(){return de(0,1)}},"\u23f6"),a.a.createElement("button",{onClick:function(){return de(0,-1)}},"\u23f7"),a.a.createElement("button",{onClick:function(){return p(+Ie(v+1))}},"\u2795"),a.a.createElement("button",{onClick:function(){return p(+Ie(v-1))}},"\u2796"),b&&a.a.createElement("button",{onClick:function(){return s("".concat(b.coords.longitude,",").concat(b.coords.latitude))}},"\ud83d\udccd"),a.a.createElement("button",{onClick:function(){return he("png")},disabled:L},"\u2b73 PNG"),a.a.createElement("button",{onClick:function(){return he("svg")},disabled:L},"\u2b73 SVG")),a.a.createElement("label",null,"Centre ",a.a.createElement("input",{value:i,onChange:function(e){return s(e.target.value)}})),a.a.createElement("label",null,"Zoom ",a.a.createElement("input",{type:"number",value:v,onChange:function(e){return p(+e.target.value)}})),a.a.createElement(we,{value:n,onChange:r,style:{flex:1},spellCheck:!1}),a.a.createElement("div",{className:"status-area"},w&&a.a.createElement("p",null,w),B>0&&a.a.createElement("progress",{value:B}),P&&a.a.createElement("p",{style:{color:"red"}},P)),G&&a.a.createElement(Se.a,{context:D.current,style:{maxHeight:200}})),a.a.createElement("canvas",{ref:g,onDoubleClick:function(e){var t=e.nativeEvent,n=t.offsetX,r=t.offsetY,a=t.ctrlKey,o=t.shiftKey,c=t.altKey,i=function(e,t,n){var r=e.x,a=e.y,o=(r-t[0])/(t[2]-t[0]),c=(a-t[1])/(t[3]-t[1]),i=n[2]-n[0],s=n[3]-n[1];return{x:o*i+n[0],y:c*s+n[1]}}({x:n,y:r},[0,Z,H,0],function(e){return e.split(",").map((function(e){return+e}))}(ne)),u=i.x,l=i.y;s(Te(u,l));var f=c?3:1;a?p(v+f):o&&p(v-f)}}))};function Pe(){return(Pe=Object(l.a)(s.a.mark((function e(t,n,r){var a,o,c,i,l,f,d,h,v=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=v.length>3&&void 0!==v[3]?v[3]:null,o=k(n.rules,t),c=o.map((function(e){return{rule:e,promise:r.getElements(e.selector)}})),ne.getCollisionSystem().clear(),i=new le(t.width,t.height),l=Object(u.a)(c),e.prev=6,l.s();case 8:if((f=l.n()).done){e.next=16;break}return d=f.value,e.next=12,d.promise;case 12:h=e.sent,i.renderRule(t,d.rule,h);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),l.e(e.t0);case 21:return e.prev=21,l.f(),e.finish(21);case 24:Ce(i.toBlob(),"map.svg"),a&&a();case 27:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})))).apply(this,arguments)}function Ce(e,t){var n=URL.createObjectURL(e),r=document.createElement("a");r.download=t,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}function Ie(e){return e.toFixed(5).replace(/^0+|0+$/g,"")}function Te(e,t){return"".concat(Ie(e),",").concat(Ie(t))}function Le(){return(Le=Object(l.a)(s.a.mark((function e(t,n,r,a,o,c,i,l){var f,d,h,v,p,b,g,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o("Fetching..."),c(""),e.prev=2,e.next=5,n.preLoadElements(t.map((function(e){return e.selector})));case 5:if(f=e.sent,l.currentEffect){e.next=8;break}return e.abrupt("return");case 8:if(!(f<0)){e.next=10;break}return e.abrupt("return");case 10:if(o(0===f?"Rendering...":"Rendering ".concat(f," elements...")),d=t.map((function(e){return{rule:e,promise:r instanceof ie?Promise.resolve():n.getElements(e.selector)}})),ne.getCollisionSystem().clear(),!r){e.next=43;break}if(l.currentEffect){e.next=16;break}return e.abrupt("return");case 16:r.clear(a),h=0,v=Object(u.a)(d),e.prev=19,v.s();case 21:if((p=v.n()).done){e.next=34;break}return b=p.value,g="".concat(++h,"/").concat(d.length),console.debug("".concat(g," Loading elements for ").concat(b.rule.selector)),e.next=27,b.promise;case 27:if(m=e.sent,l.currentEffect){e.next=30;break}return e.abrupt("return");case 30:console.debug("".concat(g," Rendering ").concat(b.rule.selector)),r.renderRule(a,b.rule,m);case 32:e.next=21;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(19),v.e(e.t0);case 39:return e.prev=39,v.f(),e.finish(39);case 42:console.debug("Rendered!");case 43:o(null),e.next=51;break;case 46:e.prev=46,e.t1=e.catch(2),c("Error Fetching"),o(null),console.log(e.t1);case 51:case"end":return e.stop()}}),e,null,[[2,46],[19,36,39,42]])})))).apply(this,arguments)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.0544f4ba.chunk.js.map