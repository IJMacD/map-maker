!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/map-maker/",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=h(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function g(e,t,n,r){var a=v(e,2),o=a[0],i=a[1],l=Math.pow(2,t),c=256/(180/l),s=256/(180/l),u=Math.PI/4,f=n/2,d=r/2,h=180*Math.log(Math.tan(u+i/180*Math.PI/2))/Math.PI;return function(e,t){var n=e,r=180*Math.log(Math.tan(u+t/180*Math.PI/2))/Math.PI;return[f+(n-o)*c,d-(r-h)*s]}}function m(e){return e.reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(t){return t/e.length}))}function b(e){var t=k(e);return[t[0]+t[2]/2,t[1]+t[3]/2]}function x(e){return e[Math.floor((e.length-1)/2)]}function k(e){var t=e.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[0]),Math.max(e[3],t[1])]}),[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]);return[t[0],t[1],t[2]-t[0],t[3]-t[1]]}function w(e,t,n,r){return[[e,t],[e,t+r],[e+n,t+r],[e+n,t]]}function M(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n][0]*e[n+1][1]-e[n+1][0]*e[n][1];return t/2}function S(e){return Math.abs(M(e))}function I(e){return M(e)>0}function P(e){var t=e.length;if(!(t<3)){for(var n=0,r=1;r<t;r++){var a=e[r-1],o=e[r],i=e[(r+1)%t],l=Math.sign((o[0]-a[0])*(i[1]-o[1])-(o[1]-a[1])*(i[0]-o[0]));if(0===n)n=l;else if(0!==l&&n!==l)return!1}return!0}}function T(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]}function j(e){for(var t=0,n=1;n<e.length;n++){var r=e[n][0]-e[n-1][0],a=e[n][1]-e[n-1][1];t+=Math.sqrt(r*r+a*a)}return t}n.r(t);var O=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r(this,e),this.type=t,this.tags=n,this.pseudoClasses=a,this.pseudoElement=o}return o(e,[{key:"toString",value:function(){return"".concat(this.type).concat(Object.entries(this.tags).map((function(e){var t=v(e,2),n=t[0],r=t[1],a=/^[<=>]/.test(r)?"":"=";return"[".concat(n).concat(a).concat(r,"]")})).join(""))}}]),e}();function A(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.type!==e.type&&("area"!==e.type||"way"!==t.type))return!1;var r=Object.entries(e.tags);if(r.length&&"undefined"===typeof t.tags)return!1;for(var a=0,o=r;a<o.length;a++){var i=v(o[a],2),l=i[0],c=i[1];if("undefined"===typeof t.tags[l])return!1;var s=/^[<=>]+/.exec(c);if(s){if(n){var u=s[0],f=F[u];if(!f)continue;var d=c.substr(s[0].length),h=isNaN(+d)?f(t.tags[l].localeCompare(d),0):f(+t.tags[l],+d);if(!h)return!1}}else if("*"!==c&&t.tags[l]!==c)return!1}return!0}function N(e){return e[4]?{left:{left:e[1],operator:e[2],right:e[3]},operator:"and",right:{left:e[3],operator:e[4],right:e[5]}}:{left:e[1],operator:e[2],right:e[3]}}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e.left||"number"===typeof e.left?e.left:E(e.left,t),r="string"===typeof e.right||"number"===typeof e.right?e.right:E(e.right,t);"string"===typeof n&&n in t&&(t[n]instanceof Function&&(t[n]=t[n]()),n=t[n]),"string"===typeof r&&r in t&&(t[r]instanceof Function&&(t[r]=t[r]()),r=t[r]);var a=F[e.operator];return!!a&&a(n,r)}O.parse=function(e){var t=/^\s*([a-z]+)/.exec(e);if(!t)return null;var n=t[1];"rel"===n&&(n="relation");for(var r={},a=e.substring(t[0].length).trim(),o=/^\[([a-z0-9_-]+)(=|<=|>=|<|>)([^[\]]+)\]/i;;){var i=o.exec(a);if(!i)break;var l="="===i[2]?"":i[2];r[i[1]]=l+i[3],a=a.substring(i[0].length)}for(var c=[],s=/^:([a-z-]+)(?:\(([^)]+)\))?/,u=function(){var e=s.exec(a);if(!e)return"break";var t=/^\s*([^\s)]+)\s*(:|=|<=|>=|<|>|and|or)\s*([^\s)]+)(?:\s*(=|<=|>=|<|>)\s*([^\s)]+))?/,n=e[2]?e[2].split(",").map((function(e){return t.test(e)?N(t.exec(e)):e})):[];c.push({name:e[1],params:n}),a=a.substring(e[0].length)};;){if("break"===u())break}var f=null,d=/^::([a-z-]+)?/;if(d.test(a)){var h=d.exec(a);f=h[1],a=a.substring(h[0].length)}return a.length?(console.log("Invalid selector: ".concat(e," unexpected part: '").concat(a,"'")),null):new O(n,r,c,f)},O.parseMultiple=function(e){return e.split(",").map(O.parse).filter((function(e){return e}))};var F={":":function(e,t){return e==t},"=":function(e,t){return e==t},">":function(e,t){return e>t},"<":function(e,t){return e<t},">=":function(e,t){return e>=t},"<=":function(e,t){return e<=t},and:function(e,t){return e&&t},or:function(e,t){return e||t}};function C(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.selector;if(_(r,"is","convex")&&!P(t))return!1;if(_(r,"is","concave")&&P(t))return!1;if(_(r,"is","clockwise")&&I(t))return!1;if(_(r,"is","anti-clockwise")&&!I(t))return!1;if(_(r,"is","self-closing")&&n[0]!==n[t.length-1])return!1;var a,o=r.pseudoClasses.filter((function(e){return"has"===e.name})),i=y(o);try{for(i.s();!(a=i.n()).done;){var l=a.value;if("string"===typeof l.params[0])return!1;var c=l.params[0],s={area:function(){return S(t)},length:function(){return j(t)},width:function(){return k(t)[2]},height:function(){return k(t)[3]}},u=E(c,s);if(!u)return!1}}catch(f){i.e(f)}finally{i.f()}return!0}function _(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.pseudoClasses.some((function(e){return e.name===t&&e.params[0]===r[0]}))}function z(e,t,n){var r=e.declarations.content;if(!r)return"";for(var a=0,o=[];a<r.length;){var i=r.substr(a),l=/^\s+/.exec(i);if(l)a+=l[0].length;else if(l=/^"(.*?[^\\])"/.exec(i))o.push(l[1].replace(/\\"/g,'"').replace(/\\n/g,"\n")),a+=l[0].length;else if(l=/^tag\(([^)]+)\)/.exec(i))o.push(t.tags[l[1]]||""),a+=l[0].length;else{if(!(l=/^debug\(([^)]+)\)/.exec(i)))return"?";"type"===l[1]?o.push(t.type):"tags"===l[1]?o.push(Object.entries(t.tags).map((function(e){var t=v(e,2),n=t[0],r=t[1];return"[".concat(n,"=").concat(r,"]")})).join("\n")):"location"===l[1]&&"node"===t.type?o.push("(".concat(t.lon,",").concat(t.lat,")")):"node_count"!==l[1]||"way"!==t.type&&"area"!==t.type?"scale"===l[1]&&o.push(n.scale.toString()):o.push(t.nodes.length.toString()),a+=l[0].length}}return o.join("")}var R=function(){function e(){r(this,e)}return o(e,[{key:"renderRule",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};n.forEach((function(e){return"node"===e.type&&(r[e.id]=e)}));var a={};n.forEach((function(e){return"way"===e.type&&(a[e.id]=e)}));var o=e.centre,i=e.zoom,l=e.width,c=e.height,s=g(o,i,l,c);this.globalSetup(e,t);var u=t.selector.type;switch(u){case"map":var f=w(0,0,l,c);t.selector.pseudoElement?this.renderPseudoElement(e,t,f,null,null):this.renderArea(e,t,f,null);break;case"current":if(e.current){var d=e.current;this.renderPoint(e,t,s(d.longitude,d.latitude))}break;case"gridlines":this.renderGridlines(e,t,s);break;case"dummy":this.renderPoint(e,t,[0,0]);break;default:var h,v=y(n);try{for(v.s();!(h=v.n()).done;){var p=h.value;if(A(t.selector,p))switch(u){case"node":if("node"!==p.type)continue;var m=s(p.lon,p.lat);t.selector.pseudoElement?this.renderPseudoElement(e,t,[m],p,[p]):this.renderPoint(e,t,m,p);break;case"way":case"area":if("way"!==p.type)continue;var b=p.nodes.map((function(e){return r[e]})),x=b.map((function(e){return s(e.lon,e.lat)}));if(!C(t,x,p,b))continue;t.selector.pseudoElement?this.renderPseudoElement(e,t,x,p,b):"area"===u?this.renderArea(e,t,x,p):this.renderLine(e,t,x,p);break;case"relation":if("relation"!==p.type)continue}}}catch(k){v.e(k)}finally{v.f()}}}},{key:"renderPoint",value:function(e,t,n){}},{key:"renderLine",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.renderAreaLine(e,t,n,x,r)}},{key:"renderArea",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;0!==n.length&&(T(n)||(n=[].concat(p(n),[n[0]])),this.renderAreaLine(e,t,n,b,r))}},{key:"renderAreaLine",value:function(e,t,n,r){}},{key:"renderPseudoElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(t.selector.pseudoElement){case"centre":case"center":var a=b(n);this.renderPoint(e,t,a,r);break;case"mid-point":var o=x(n);this.renderPoint(e,t,o,r);break;case"average-point":var i=m(n);this.renderPoint(t,i,r,e);break;case"start":this.renderPoint(e,t,n[0],r);break;case"end":this.renderPoint(e,t,n[n.length-1],r);break;case"centre-of-mass":break;case"bounding-box":var l=k(n),c=w.apply(void 0,p(l));this.renderArea(e,t,c,r);break;case"content-box":var s=e.scale,u=v(n[0],2),f=u[0],d=u[1],h=z(t,r,e);if(!h)return;var g,M,S=Number.NEGATIVE_INFINITY,I=Number.NaN,P=d,T=y(h.split("\n"));try{for(T.s();!(M=T.n()).done;){var j=M.value,O=this.measureText(e,t,j);S=Math.max(S,O.width),isNaN(I)&&(I=d-O.ascending),g=P+O.descending,P+=O.height}}catch(C){T.e(C)}finally{T.f()}var A=t.declarations.padding?parseFloat(t.declarations.padding)*s:0;"center"===t.declarations["text-align"]||"centre"===t.declarations["text-align"]?f-=S/2:"right"===t.declarations["text-align"]&&(f-=S);var N=[[f-A,I-A],[f-A,g+A],[f+S+A,g+A],[f+S+A,I-A]];N.push(N[0]),this.renderAreaLine(e,t,N,(function(){return n[0]}),r);break;case"decimate":if("way"===t.selector.type){var E=n.length-1,F=n.filter((function(e,t){return t%10===0||t===E}));this.renderLine(e,t,F,r)}}}},{key:"renderGridlines",value:function(e,t,n){var r=t.selector.pseudoClasses.find((function(e){return"vertical"===e.name})),a=t.selector.pseudoClasses.find((function(e){return"horizontal"===e.name})),o=e.width,i=e.height,l=function(e,t,n){var r=v(e,2),a=r[0],o=r[1],i=v(n,2),l=i[0],c=i[1],s=Math.pow(2,t),u=180/s*(l/256),f=180/s*(c/256);return[a-u,o-f,a+u,o+f].map((function(e){return e.toFixed(3)})).join(",")}(e.centre,e.zoom,[o,i]).split(",");if(r)for(var c=parseFloat(r.params[0]),s=1/c,u=Math.ceil(Math.log10(s)),f=Math.floor(+l[0]*s)/s,d=Math.ceil(+l[2]*s)/s,h=Math.floor(+l[1]*s)/s,p=Math.ceil(+l[3]*s)/s,y=f;y<=d;y+=c){var g=[n(y,h),n(y,(h+p)/2),n(y,p)];this.renderLine(e,t,g,{type:"way",id:0,nodes:[],tags:{name:y.toFixed(u)}})}if(a)for(var m=parseFloat(a.params[0]),b=1/m,x=Math.ceil(Math.log10(b)),k=Math.floor(+l[0]*b)/b,w=Math.ceil(+l[2]*b)/b,M=Math.floor(+l[1]*b)/b,S=Math.ceil(+l[3]*b)/b,I=M;I<=S;I+=m){var P=[n(k,I),n((k+w)/2,I),n(w,I)];this.renderLine(e,t,P,{type:"way",id:0,nodes:[],tags:{name:I.toFixed(x)}})}}},{key:"clear",value:function(e){}},{key:"globalSetup",value:function(e,t){}},{key:"measureText",value:function(e,t,n){return{width:0,ascending:0,descending:0,height:0}}}]),e}();function L(e,t,n){var r=function(e,t){var n,r=e.declarations.fill,a=e.declarations.stroke;if(a){var o=a.replace(/\([^)]*\)/g,(function(e){return" ".repeat(e.length)}));o=(o=o.replace(/#[0-9a-f]{3}/i,"    ")).replace(/#[0-9a-f]{6}/i,"       ");var i=/(\d+(?:\.\d+)?)\s*(?:px)?/.exec(o);i&&(n=+i[1]*t,a=a.replace(i[0],""))}return e.declarations["stroke-width"]&&(n=+e.declarations["stroke-width"]*t),{fillStyle:r,strokeStyle:a,lineWidth:n}}(t,n),a=r.fillStyle,o=r.strokeStyle,i=r.lineWidth;e.fillStyle=a,e.strokeStyle=o,e.lineWidth=i}function B(e,t,n){var r=v(n,2),a=r[0],o=r[1],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4?arguments[4]:void 0;L(e,t,l.scale);var c=z(t,i,l);D(e,t,l.scale);var s,u=y(c.split("\n"));try{for(u.s();!(s=u.n()).done;){var f=s.value;o+=V(e,t,f,a,o)}}catch(d){u.e(d)}finally{u.f()}}function V(e,t,n,r,a){var o=e.measureText(n);if(t.declarations["text-align"]){var i=o.width;"center"===t.declarations["text-align"]||"centre"===t.declarations["text-align"]?r-=i/2:"right"===t.declarations["text-align"]&&(r-=i)}return t.declarations["text-stroke"]&&(e.strokeStyle=t.declarations["text-stroke"],e.strokeText(n,r,a)),!t.declarations["text-color"]&&t.declarations["text-stroke"]||(e.fillStyle=t.declarations["text-color"],e.fillText(n,r,a)),o.actualBoundingBoxAscent+o.actualBoundingBoxDescent}function D(e,t,n){var r="".concat(10*n,"px"),a="normal",o="sans-serif";t.declarations.font?e.font=t.declarations.font.replace(/\d+(?:\.\d+)?/,(function(e){return"".concat(+e*n)})):(t.declarations["font-size"]&&(r=t.declarations["font-size"].replace(/^\d[\d.]*/,(function(e){return"".concat(+e*n)}))),t.declarations["font-weight"]&&(a=t.declarations["font-weight"]),t.declarations["font-family"]&&(o=t.declarations["font-family"]),e.font="".concat(a," ").concat(r," ").concat(o))}function G(e,t,n){if(t.declarations.transform)for(var r,a=/\s*([a-z]+)\(([^)]*)\)\s*/g,o=t.declarations.transform;r=a.exec(o);){var i=r[1],l=r[2].split(",").map((function(e){return{value:parseFloat(e)*n,unit:e.replace(/[-\d.\s]/g,"")}}));switch(i){case"matrix":e.transform.apply(e,p(l.map((function(e){return e.value}))));break;case"rotate":var c=l[0],s=c.value,u=c.unit;"deg"===u?s*=Math.PI/180:"turn"===u&&(s*=2*Math.PI),e.rotate(s);break;case"scale":var f=l[0].value,d=l[1]?l[1].value:f;e.scale(f,d);break;case"translate":e.translate.apply(e,p(l.map((function(e){return e.value}))));break;case"skew":var h=l[0],v=h.value,y=h.unit;"rad"===y?v=Math.tan(v):"deg"===y&&(v=Math.tan(v*Math.PI/180));var g=0;if(l[1]){var m=l[1],b=m.value,x=m.unit;"rad"===x?b=Math.tan(b):"deg"===x&&(b=Math.tan(b*Math.PI/180)),g=b}e.transform(1,g,v,1,0,0)}}}function Y(e,t,n){var r=v(n,2),a=r[0],o=r[1],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.save();var c=l.scale;if(e.fillStyle=t.declarations.fill,e.strokeStyle=t.declarations.stroke,e.lineWidth=+t.declarations["stroke-width"]*c,"absolute"===t.declarations.position&&(a=(parseFloat(t.declarations.left)||0)*c,o=(parseFloat(t.declarations.top)||0)*c),e.translate(a,o),G(e,t,c),t.declarations.size){e.beginPath();var s=+t.declarations.size*c;e.ellipse(0,0,s,s,0,0,2*Math.PI),t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke()}t.declarations.path&&(e.beginPath(),q(e,t.declarations.path,c),t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke());var u=/url\(([^)]+)\)(?:\s+([^\s]+)(?:\s+([^\s]+))?)?/;if(u.test(t.declarations.icon)){var f=u.exec(t.declarations.icon),d=f[1],h=new Image;h.src=d;var p=parseFloat(f[2]),y=parseFloat(f[3]);h.addEventListener("load",(function(){if(e.save(),e.translate(a,o),p){var t=isNaN(y)?h.height*(p/h.width):y;e.drawImage(h,0,0,p*c,t*c)}else e.drawImage(h,0,0);e.restore()}))}t.declarations.content&&B(e,t,[0,0],i,l),e.restore()}function q(e,t,n){for(var r,a,o,i=/([MLQCVHZ])\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?/gi;r=i.exec(t);){var l=parseFloat(r[2])*n,c=parseFloat(r[3])*n,s=parseFloat(r[4])*n,u=parseFloat(r[5])*n,f=parseFloat(r[6])*n,d=parseFloat(r[7])*n;a||(a=[l,c]),"M"===r[1]?(o=[l,c],e.moveTo(l,c)):"L"===r[1]?(o=[l,c],e.lineTo(l,c)):"Q"===r[1]?(o=[s,u],e.quadraticCurveTo(l,c,s,u)):"C"===r[1]?(o=[f,d],e.bezierCurveTo(l,c,s,u,f,d)):"Z"===r[1]?(o=a,e.lineTo.apply(e,p(o))):"V"===r[1]?(o=[o[0],l],e.lineTo.apply(e,p(o))):"H"===r[1]?(o=[l,o[1]],e.lineTo.apply(e,p(o))):"m"===r[1]?(o=[o[0]+l,o[1]+c],e.moveTo.apply(e,p(o))):"l"===r[1]?(o=[o[0]+l,o[1]+c],e.lineTo.apply(e,p(o))):"q"===r[1]?(e.quadraticCurveTo(o[0]+l,o[1]+c,o[0]+s,o[1]+u),o=[o[0]+s,o[1]+u]):"c"===r[1]?(o=[f,d],e.bezierCurveTo(o[0]+l,o[1]+c,o[0]+s,o[1]+u,o[0]+f,o[1]+d),o=[o[0]+f,o[1]+d]):"z"===r[1]?(o=a,e.lineTo.apply(e,p(a))):"v"===r[1]?(o=[o[0],o[1]+l],e.lineTo.apply(e,p(o))):"h"===r[1]&&(o=[o[0]+l,o[1]],e.lineTo.apply(e,p(o)))}}var W=function(){function e(){r(this,e),this.sets={}}return o(e,[{key:"clear",value:function(){this.sets={}}},{key:"add",value:function(e,t){this.sets[e]||(this.sets[e]=[]);var n,r=y(this.sets[e]);try{for(r.s();!(n=r.n()).done;){if(H(t,n.value))return!1}}catch(a){r.e(a)}finally{r.f()}return this.sets[e].push(t),!0}}],[{key:"getCollisionSystem",value:function(){return this.singleton||(this.singleton=new e),this.singleton}}]),e}();function H(e,t){var n=e[0],r=e[1],a=e[0]+e[2],o=e[1]+e[3],i=t[0],l=t[1],c=t[0]+t[2],s=t[1]+t[3];return n<c&&a>i&&r<s&&o>l}function Q(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(0!==n.length){if(t.declarations["collision-set"]){var i=k(n);if(t.declarations["collision-size"]){var l=/(\d+\.?\d*)%/.exec(t.declarations["collision-size"]),c=+l[1]/100,s=i[2],u=i[3];i[0]+=(1-c)*s/2,i[1]+=(1-c)*u/2,i[2]=s*c,i[3]=u*c}var f=W.getCollisionSystem();if(!f.add(t.declarations["collision-set"],i)){var d=t.declarations["collision-policy"]||"hide";if("hide"===d)return}}e.save(),L(e,t,o.scale);var h=0,v=0;if(t.declarations.transform){var p=r(n);h=p[0],v=p[1],e.translate(h,v),G(e,t,o.scale)}e.beginPath(),e.moveTo(n[0][0]-h,n[0][1]-v);for(var y=1;y<n.length;y++)e.lineTo(n[y][0]-h,n[y][1]-v);t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke(),e.restore(),(t.declarations.content||t.declarations.size||t.declarations.path||t.declarations.icon)&&(e.save(),Y(e,t,r(n),a,o),e.restore())}}var Z,U,$=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n=(t=a,function(){var e,n=i(t);if(c()){var r=i(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)});function a(e){var t;return r(this,a),(t=n.call(this)).canvas=e,t}return o(a,[{key:"clear",value:function(e){var t=e.width,n=e.height;this.canvas.width=t,this.canvas.height=n}},{key:"renderRule",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.canvas.getContext("2d");r.save(),l(i(a.prototype),"renderRule",this).call(this,e,t,n),r.restore()}},{key:"globalSetup",value:function(e,t){var n=e.scale,r=this.canvas.getContext("2d");if(t.declarations.opacity&&(r.globalAlpha=+t.declarations.opacity),"relative"===t.declarations.position){var a=(parseFloat(t.declarations.top)||0)*n,o=(parseFloat(t.declarations.left)||0)*n;r.translate(o,a)}}},{key:"renderPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.canvas.getContext("2d");Y(a,t,n,r,e)}},{key:"renderAreaLine",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=this.canvas.getContext("2d");Q(o,t,n,r,a,e)}},{key:"measureText",value:function(e,t,n){var r=this.canvas.getContext("2d");D(r,t,e.scale);var a=r.measureText(n),o=a.width,i=a.actualBoundingBoxDescent,l=a.actualBoundingBoxAscent;return{width:o,ascending:l,descending:i,height:l+i}}}]),a}(R);onmessage=function(e){if(e.data.canvas&&(Z=e.data.canvas,U=new $(Z)),"clear"===e.data.method){var t=e.data.context,n=t.width,r=t.height;Z.width=n,Z.height=r,Z.getContext("2d").fillRect(0,0,n,r)}if("renderRule"===e.data.method){var a=e.data,o=a.context,i=a.rule,l=a.elements;U.renderRule(o,i,l)}}}]);
//# sourceMappingURL=render-worker.20ac31e5.worker.js.map