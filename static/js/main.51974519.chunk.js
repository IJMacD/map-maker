(this["webpackJsonpmap-maker"]=this["webpackJsonpmap-maker"]||[]).push([[0],{19:function(e,t,n){e.exports=n(28)},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t),n.d(t,"API_ROOT",(function(){return r}));var r="https://overpass-api.de/api/interpreter"},28:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(16),o=n.n(i),c=(n(24),n(4)),s=n.n(c),u=n(2),l=n(7),f=n(1);n(26);function d(e,t){var n=a.a.useState((function(){var n=localStorage.getItem(e);if(n)try{t=JSON.parse(n)}catch(r){}return t})),r=Object(f.a)(n,2),i=r[0],o=r[1];return[i,function(t){localStorage.setItem(e,JSON.stringify(t)),o(t)}]}var h=n(3),v=n(5),p=n(6),g=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(v.a)(this,e),this.type=t,this.tags=n,this.pseudoClasses=r,this.pseudoElement=a}return Object(p.a)(e,[{key:"toString",value:function(){return"".concat(this.type).concat(Object.entries(this.tags).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1],a=/^[<=>]/.test(r)?"":"=";return"[".concat(n).concat(a).concat(r,"]")})).join(""))}}]),e}();function b(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.type!==e.type&&("area"!==e.type||"way"!==t.type))return!1;var r=Object.entries(e.tags);if(r.length&&"undefined"===typeof t.tags)return!1;for(var a=0,i=r;a<i.length;a++){var o=Object(f.a)(i[a],2),c=o[0],s=o[1];if("undefined"===typeof t.tags[c])return!1;var u=/^[<=>]+/.exec(s);if(u){if(n){var l=u[0],d=O[l];if(!d)continue;var h=s.substr(u[0].length),v=isNaN(+h)?d(t.tags[c].localeCompare(h),0):d(+t.tags[c],+h);if(!v)return!1}}else if("*"!==s&&t.tags[c]!==s)return!1}return!0}function m(e){for(var t,n,r=/^\s*@match\s*\(([^\s)]+)\s*(:|=|<=|>=|<|>|and|or)\s*([^\s)]+)(?:\s*(=|<=|>=|<|>)\s*([^\s)]+))?\)\s*{/,a={mediaQueries:[],index:0},i=/^\s*}/;t=r.exec(e);){var o=x(t);a.index+=t[0].length;var c=y(e=e.substring(t[0].length)),s=c.rules,u=c.index;a.index+=u,e=e.substring(u),(n=i.exec(e))?(a.mediaQueries.push({type:"query",predicate:o,rules:s}),a.index+=n[0].length):console.log("Unterminated media query")}return a}function y(e){for(var t,n=/^\s*([^{}]+)\s*{([^{}]*)}/,r={rules:[],index:0},a=function(){var n={};t[2].split(";").map((function(e){return e.trim()})).filter((function(e){return e})).forEach((function(e){var t=e.indexOf(":"),r=e.substring(0,t).trim(),a=e.substring(t+1).trim();n[r]=a}));var a=g.parseMultiple(t[1]);a.length&&r.rules.push({type:"rule",selectors:a,declarations:n}),r.index+=t[0].length,e=e.substring(t[0].length)};t=n.exec(e);)a();return r}function k(e,t){var n,r=[],a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if("rule"===i.type){var o,c=i.declarations,s=Object(u.a)(i.selectors);try{for(s.s();!(o=s.n()).done;){var l=o.value;r.push({type:"rule",selector:l,declarations:c})}}catch(f){s.e(f)}finally{s.f()}}else j(i.predicate,t)&&r.push.apply(r,Object(h.a)(k(i.rules,t)))}}catch(f){a.e(f)}finally{a.f()}return r}function x(e){return e[4]?{left:{left:e[1],operator:e[2],right:e[3]},operator:"and",right:{left:e[3],operator:e[4],right:e[5]}}:{left:e[1],operator:e[2],right:e[3]}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e.left||"number"===typeof e.left?e.left:j(e.left,t),r="string"===typeof e.right||"number"===typeof e.right?e.right:j(e.right,t);"string"===typeof n&&n in t&&(t[n]instanceof Function&&(t[n]=t[n]()),n=t[n]),"string"===typeof r&&r in t&&(t[r]instanceof Function&&(t[r]=t[r]()),r=t[r]);var a=O[e.operator];return!!a&&a(n,r)}g.parse=function(e){var t=/^\s*([a-z]+)/.exec(e);if(!t)return null;var n=t[1];"rel"===n&&(n="relation");for(var r={},a=e.substring(t[0].length).trim(),i=/^\[([a-z0-9_-]+)(=|<=|>=|<|>)([^[\]]+)\]/i;;){var o=i.exec(a);if(!o)break;var c="="===o[2]?"":o[2];r[o[1]]=c+o[3],a=a.substring(o[0].length)}for(var s=[],u=/^:([a-z-]+)(?:\(([^)]+)\))?/,l=function(){var e=u.exec(a);if(!e)return"break";var t=/^\s*([^\s)]+)\s*(:|=|<=|>=|<|>|and|or)\s*([^\s)]+)(?:\s*(=|<=|>=|<|>)\s*([^\s)]+))?/,n=e[2]?e[2].split(",").map((function(e){return t.test(e)?x(t.exec(e)):e})):[];s.push({name:e[1],params:n}),a=a.substring(e[0].length)};;){if("break"===l())break}var f=null,d=/^::([a-z-]+)?/;if(d.test(a)){var h=d.exec(a);f=h[1],a=a.substring(h[0].length)}return a.length?(console.log("Invalid selector: ".concat(e," unexpected part: '").concat(a,"'")),null):new g(n,r,s,f)},g.parseMultiple=function(e){return e.split(",").map(g.parse).filter((function(e){return e}))};var O={":":function(e,t){return e==t},"=":function(e,t){return e==t},">":function(e,t){return e>t},"<":function(e,t){return e<t},">=":function(e,t){return e>=t},"<=":function(e,t){return e<=t},and:function(e,t){return e&&t},or:function(e,t){return e||t}},w=n(8),E=n(14),M=n(10),S=n(11);function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function T(e,t,n,r){var a=Object(f.a)(e,2),i=a[0],o=a[1],c=Math.pow(2,t),s=256/(180/c),u=256/(180/c),l=Math.PI/4,d=n/2,h=r/2,v=180*Math.log(Math.tan(l+o/180*Math.PI/2))/Math.PI;return function(e,t){var n=e,r=180*Math.log(Math.tan(l+t/180*Math.PI/2))/Math.PI;return[d+(n-i)*s,h-(r-v)*u]}}function I(e){return e.reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(t){return t/e.length}))}function C(e){var t=N(e);return[t[0]+t[2]/2,t[1]+t[3]/2]}function L(e){return e[Math.floor((e.length-1)/2)]}function N(e){var t=e.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[0]),Math.max(e[3],t[1])]}),[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]);return[t[0],t[1],t[2]-t[0],t[3]-t[1]]}function F(e,t,n,r){return[[e,t],[e,t+r],[e+n,t+r],[e+n,t]]}function R(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n][0]*e[n+1][1]-e[n+1][0]*e[n][1];return t/2}function B(e){return Math.abs(R(e))}function A(e){return R(e)>0}function z(e){var t=e.length;if(!(t<3)){for(var n=0,r=1;r<t;r++){var a=e[r-1],i=e[r],o=e[(r+1)%t],c=Math.sign((i[0]-a[0])*(o[1]-i[1])-(i[1]-a[1])*(o[0]-i[0]));if(0===n)n=c;else if(0!==c&&n!==c)return!1}return!0}}function _(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]}function q(e){for(var t=0,n=1;n<e.length;n++){var r=e[n][0]-e[n-1][0],a=e[n][1]-e[n-1][1];t+=Math.sqrt(r*r+a*a)}return t}function W(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.selector;if(D(r,"is","convex")&&!z(t))return!1;if(D(r,"is","concave")&&z(t))return!1;if(D(r,"is","clockwise")&&A(t))return!1;if(D(r,"is","anti-clockwise")&&!A(t))return!1;if(D(r,"is","self-closing")&&n[0]!==n[t.length-1])return!1;var a,i=r.pseudoClasses.filter((function(e){return"has"===e.name})),o=Object(u.a)(i);try{for(o.s();!(a=o.n()).done;){var c=a.value;if("string"===typeof c.params[0])return!1;var s=c.params[0],l={area:function(){return B(t)},length:function(){return q(t)},width:function(){return N(t)[2]},height:function(){return N(t)[3]}},f=j(s,l);if(!f)return!1}}catch(d){o.e(d)}finally{o.f()}return!0}function D(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.pseudoClasses.some((function(e){return e.name===t&&e.params[0]===r[0]}))}function Q(e,t,n){var r=e.declarations.content;if(!r)return"";for(var a=0,i=[];a<r.length;){var o=r.substr(a),c=/^\s+/.exec(o);if(c)a+=c[0].length;else if(c=/^"(.*?[^\\])"/.exec(o))i.push(c[1].replace(/\\"/g,'"').replace(/\\n/g,"\n")),a+=c[0].length;else if(c=/^tag\(([^)]+)\)/.exec(o))i.push(t.tags[c[1]]||""),a+=c[0].length;else{if(!(c=/^debug\(([^)]+)\)/.exec(o)))return"?";"type"===c[1]?i.push(t.type):"tags"===c[1]?i.push(Object.entries(t.tags).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return"[".concat(n,"=").concat(r,"]")})).join("\n")):"location"===c[1]&&"node"===t.type?i.push("(".concat(t.lon,",").concat(t.lat,")")):"node_count"!==c[1]||"way"!==t.type&&"area"!==t.type?"scale"===c[1]&&i.push(n.scale.toString()):i.push(t.nodes.length.toString()),a+=c[0].length}}return i.join("")}function U(e,t){var n=e.split(","),r=Object(f.a)(n,4),a=r[0],i=r[1],o=r[2],c=r[3],s=t.split(","),u=Object(f.a)(s,4),l=u[0],d=u[1],h=u[2],v=u[3];return l>=a&&d>=i&&h<=o&&v<=c}function V(e){var t=e.split(",");return(+t[2]-+t[0])*(+t[3]-+t[1])}function G(e,t,n){var r=Object(f.a)(e,2),a=r[0],i=r[1],o=Object(f.a)(n,2),c=o[0],s=o[1],u=Math.pow(2,t),l=180/u*(c/256),d=180/u*(s/256);return[a-l,i-d,a+l,i+d].map((function(e){return e.toFixed(3)})).join(",")}var J=function(){function e(){Object(v.a)(this,e)}return Object(p.a)(e,[{key:"renderRule",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};n.forEach((function(e){return"node"===e.type&&(r[e.id]=e)}));var a={};n.forEach((function(e){return"way"===e.type&&(a[e.id]=e)}));var i=e.centre,o=e.zoom,c=e.width,s=e.height,l=T(i,o,c,s);this.globalSetup(e,t);var f=t.selector.type;switch(f){case"map":var d=F(0,0,c,s);t.selector.pseudoElement?this.renderPseudoElement(e,t,d,null,null):this.renderArea(e,t,d,null);break;case"current":if(e.current){var h=e.current;this.renderPoint(e,t,l(h.longitude,h.latitude))}break;case"gridlines":this.renderGridlines(e,t,l);break;case"dummy":this.renderPoint(e,t,[0,0]);break;default:var v,p=Object(u.a)(n);try{for(p.s();!(v=p.n()).done;){var g=v.value;if(b(t.selector,g))switch(f){case"node":if("node"!==g.type)continue;var m=l(g.lon,g.lat);t.selector.pseudoElement?this.renderPseudoElement(e,t,[m],g,[g]):this.renderPoint(e,t,m,g);break;case"way":case"area":if("way"!==g.type)continue;var y=g.nodes.map((function(e){return r[e]})),k=y.map((function(e){return l(e.lon,e.lat)}));if(!W(t,k,g,y))continue;t.selector.pseudoElement?this.renderPseudoElement(e,t,k,g,y):"area"===f?this.renderArea(e,t,k,g):this.renderLine(e,t,k,g);break;case"relation":if("relation"!==g.type)continue}}}catch(x){p.e(x)}finally{p.f()}}}},{key:"renderPoint",value:function(e,t,n){}},{key:"renderLine",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.renderAreaLine(e,t,n,L,r)}},{key:"renderArea",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;0!==n.length&&(_(n)||(n=[].concat(Object(h.a)(n),[n[0]])),this.renderAreaLine(e,t,n,C,r))}},{key:"renderAreaLine",value:function(e,t,n,r){}},{key:"renderPseudoElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(t.selector.pseudoElement){case"centre":case"center":var a=C(n);this.renderPoint(e,t,a,r);break;case"mid-point":var i=L(n);this.renderPoint(e,t,i,r);break;case"average-point":var o=I(n);this.renderPoint(t,o,r,e);break;case"start":this.renderPoint(e,t,n[0],r);break;case"end":this.renderPoint(e,t,n[n.length-1],r);break;case"centre-of-mass":break;case"bounding-box":var c=N(n),s=F.apply(void 0,Object(h.a)(c));this.renderArea(e,t,s,r);break;case"content-box":var l=e.scale,d=Object(f.a)(n[0],2),v=d[0],p=d[1],g=Q(t,r,e);if(!g)return;var b,m,y=Number.NEGATIVE_INFINITY,k=Number.NaN,x=p,j=Object(u.a)(g.split("\n"));try{for(j.s();!(m=j.n()).done;){var O=m.value,w=this.measureText(e,t,O);y=Math.max(y,w.width),isNaN(k)&&(k=p-w.ascending),b=x+w.descending,x+=w.height}}catch(T){j.e(T)}finally{j.f()}var E=t.declarations.padding?parseFloat(t.declarations.padding)*l:0;"center"===t.declarations["text-align"]||"centre"===t.declarations["text-align"]?v-=y/2:"right"===t.declarations["text-align"]&&(v-=y);var M=[[v-E,k-E],[v-E,b+E],[v+y+E,b+E],[v+y+E,k-E]];M.push(M[0]),this.renderAreaLine(e,t,M,(function(){return n[0]}),r);break;case"decimate":if("way"===t.selector.type){var S=n.length-1,P=n.filter((function(e,t){return t%10===0||t===S}));this.renderLine(e,t,P,r)}}}},{key:"renderGridlines",value:function(e,t,n){var r=t.selector.pseudoClasses.find((function(e){return"vertical"===e.name})),a=t.selector.pseudoClasses.find((function(e){return"horizontal"===e.name})),i=e.width,o=e.height,c=G(e.centre,e.zoom,[i,o]).split(",");if(r)for(var s=parseFloat(r.params[0]),u=1/s,l=Math.ceil(Math.log10(u)),f=Math.floor(+c[0]*u)/u,d=Math.ceil(+c[2]*u)/u,h=Math.floor(+c[1]*u)/u,v=Math.ceil(+c[3]*u)/u,p=f;p<=d;p+=s){var g=[n(p,h),n(p,(h+v)/2),n(p,v)];this.renderLine(e,t,g,{type:"way",id:0,nodes:[],tags:{name:p.toFixed(l)}})}if(a)for(var b=parseFloat(a.params[0]),m=1/b,y=Math.ceil(Math.log10(m)),k=Math.floor(+c[0]*m)/m,x=Math.ceil(+c[2]*m)/m,j=Math.floor(+c[1]*m)/m,O=Math.ceil(+c[3]*m)/m,w=j;w<=O;w+=b){var E=[n(k,w),n((k+x)/2,w),n(x,w)];this.renderLine(e,t,E,{type:"way",id:0,nodes:[],tags:{name:w.toFixed(y)}})}}},{key:"clear",value:function(e){}},{key:"globalSetup",value:function(e,t){}},{key:"measureText",value:function(e,t,n){return{width:0,ascending:0,descending:0,height:0}}}]),e}();function K(e,t){var n,r=e.declarations.fill,a=e.declarations.stroke;if(a){var i=a.replace(/\([^)]*\)/g,(function(e){return" ".repeat(e.length)}));i=(i=i.replace(/#[0-9a-f]{3}/i,"    ")).replace(/#[0-9a-f]{6}/i,"       ");var o=/(\d+(?:\.\d+)?)\s*(?:px)?/.exec(i);o&&(n=+o[1]*t,a=a.replace(o[0],""))}return e.declarations["stroke-width"]&&(n=+e.declarations["stroke-width"]*t),{fillStyle:r,strokeStyle:a,lineWidth:n}}function Y(e,t,n){var r=K(t,n),a=r.fillStyle,i=r.strokeStyle,o=r.lineWidth;e.fillStyle=a,e.strokeStyle=i,e.lineWidth=o}function H(e,t,n){var r=Object(f.a)(n,2),a=r[0],i=r[1],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4?arguments[4]:void 0;Y(e,t,c.scale);var s=Q(t,o,c);$(e,t,c.scale);var l,d=Object(u.a)(s.split("\n"));try{for(d.s();!(l=d.n()).done;){var h=l.value;i+=Z(e,t,h,a,i)}}catch(v){d.e(v)}finally{d.f()}}function Z(e,t,n,r,a){var i=e.measureText(n);if(t.declarations["text-align"]){var o=i.width;"center"===t.declarations["text-align"]||"centre"===t.declarations["text-align"]?r-=o/2:"right"===t.declarations["text-align"]&&(r-=o)}return t.declarations["text-stroke"]&&(e.strokeStyle=t.declarations["text-stroke"],e.strokeText(n,r,a)),!t.declarations["text-color"]&&t.declarations["text-stroke"]||(e.fillStyle=t.declarations["text-color"],e.fillText(n,r,a)),i.actualBoundingBoxAscent+i.actualBoundingBoxDescent}function $(e,t,n){var r="".concat(10*n,"px"),a="normal",i="sans-serif";t.declarations.font?e.font=t.declarations.font.replace(/\d+(?:\.\d+)?/,(function(e){return"".concat(+e*n)})):(t.declarations["font-size"]&&(r=t.declarations["font-size"].replace(/^\d[\d.]*/,(function(e){return"".concat(+e*n)}))),t.declarations["font-weight"]&&(a=t.declarations["font-weight"]),t.declarations["font-family"]&&(i=t.declarations["font-family"]),e.font="".concat(a," ").concat(r," ").concat(i))}function X(e,t,n){if(t.declarations.transform)for(var r,a=/\s*([a-z]+)\(([^)]*)\)\s*/g,i=t.declarations.transform;r=a.exec(i);){var o=r[1],c=r[2].split(",").map((function(e){return{value:parseFloat(e)*n,unit:e.replace(/[-\d.\s]/g,"")}}));switch(o){case"matrix":e.transform.apply(e,Object(h.a)(c.map((function(e){return e.value}))));break;case"rotate":var s=c[0],u=s.value,l=s.unit;"deg"===l?u*=Math.PI/180:"turn"===l&&(u*=2*Math.PI),e.rotate(u);break;case"scale":var f=c[0].value,d=c[1]?c[1].value:f;e.scale(f,d);break;case"translate":e.translate.apply(e,Object(h.a)(c.map((function(e){return e.value}))));break;case"skew":var v=c[0],p=v.value,g=v.unit;"rad"===g?p=Math.tan(p):"deg"===g&&(p=Math.tan(p*Math.PI/180));var b=0;if(c[1]){var m=c[1],y=m.value,k=m.unit;"rad"===k?y=Math.tan(y):"deg"===k&&(y=Math.tan(y*Math.PI/180)),b=y}e.transform(1,b,p,1,0,0)}}}function ee(e,t,n){var r=Object(f.a)(n,2),a=r[0],i=r[1],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.save();var s=c.scale;if(e.fillStyle=t.declarations.fill,e.strokeStyle=t.declarations.stroke,e.lineWidth=+t.declarations["stroke-width"]*s,"absolute"===t.declarations.position&&(a=(parseFloat(t.declarations.left)||0)*s,i=(parseFloat(t.declarations.top)||0)*s),e.translate(a,i),X(e,t,s),t.declarations.size){e.beginPath();var u=+t.declarations.size*s;e.ellipse(0,0,u,u,0,0,2*Math.PI),t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke()}t.declarations.path&&(e.beginPath(),te(e,t.declarations.path,s),t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke());var l=/url\(([^)]+)\)(?:\s+([^\s]+)(?:\s+([^\s]+))?)?/;if(l.test(t.declarations.icon)){var d=l.exec(t.declarations.icon),h=d[1],v=new Image;v.src=h;var p=parseFloat(d[2]),g=parseFloat(d[3]);v.addEventListener("load",(function(){if(e.save(),e.translate(a,i),p){var t=isNaN(g)?v.height*(p/v.width):g;e.drawImage(v,0,0,p*s,t*s)}else e.drawImage(v,0,0);e.restore()}))}t.declarations.content&&H(e,t,[0,0],o,c),e.restore()}function te(e,t,n){for(var r,a,i,o=/([MLQCVHZ])\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?\s*(-?\d+(?:\.\d+)?)?/gi;r=o.exec(t);){var c=parseFloat(r[2])*n,s=parseFloat(r[3])*n,u=parseFloat(r[4])*n,l=parseFloat(r[5])*n,f=parseFloat(r[6])*n,d=parseFloat(r[7])*n;a||(a=[c,s]),"M"===r[1]?(i=[c,s],e.moveTo(c,s)):"L"===r[1]?(i=[c,s],e.lineTo(c,s)):"Q"===r[1]?(i=[u,l],e.quadraticCurveTo(c,s,u,l)):"C"===r[1]?(i=[f,d],e.bezierCurveTo(c,s,u,l,f,d)):"Z"===r[1]?(i=a,e.lineTo.apply(e,Object(h.a)(i))):"V"===r[1]?(i=[i[0],c],e.lineTo.apply(e,Object(h.a)(i))):"H"===r[1]?(i=[c,i[1]],e.lineTo.apply(e,Object(h.a)(i))):"m"===r[1]?(i=[i[0]+c,i[1]+s],e.moveTo.apply(e,Object(h.a)(i))):"l"===r[1]?(i=[i[0]+c,i[1]+s],e.lineTo.apply(e,Object(h.a)(i))):"q"===r[1]?(e.quadraticCurveTo(i[0]+c,i[1]+s,i[0]+u,i[1]+l),i=[i[0]+u,i[1]+l]):"c"===r[1]?(i=[f,d],e.bezierCurveTo(i[0]+c,i[1]+s,i[0]+u,i[1]+l,i[0]+f,i[1]+d),i=[i[0]+f,i[1]+d]):"z"===r[1]?(i=a,e.lineTo.apply(e,Object(h.a)(a))):"v"===r[1]?(i=[i[0],i[1]+c],e.lineTo.apply(e,Object(h.a)(i))):"h"===r[1]&&(i=[i[0]+c,i[1]],e.lineTo.apply(e,Object(h.a)(i)))}}var ne=function(){function e(){Object(v.a)(this,e),this.sets={}}return Object(p.a)(e,[{key:"clear",value:function(){this.sets={}}},{key:"add",value:function(e,t){this.sets[e]||(this.sets[e]=[]);var n,r=Object(u.a)(this.sets[e]);try{for(r.s();!(n=r.n()).done;){if(re(t,n.value))return!1}}catch(a){r.e(a)}finally{r.f()}return this.sets[e].push(t),!0}}],[{key:"getCollisionSystem",value:function(){return this.singleton||(this.singleton=new e),this.singleton}}]),e}();function re(e,t){var n=e[0],r=e[1],a=e[0]+e[2],i=e[1]+e[3],o=t[0],c=t[1],s=t[0]+t[2],u=t[1]+t[3];return n<s&&a>o&&r<u&&i>c}function ae(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(0!==n.length){if(t.declarations["collision-set"]){var o=N(n);if(t.declarations["collision-size"]){var c=/(\d+\.?\d*)%/.exec(t.declarations["collision-size"]),s=+c[1]/100,u=o[2],l=o[3];o[0]+=(1-s)*u/2,o[1]+=(1-s)*l/2,o[2]=u*s,o[3]=l*s}var f=ne.getCollisionSystem();if(!f.add(t.declarations["collision-set"],o)){var d=t.declarations["collision-policy"]||"hide";if("hide"===d)return}}e.save(),Y(e,t,i.scale);var h=0,v=0;if(t.declarations.transform){var p=r(n);h=p[0],v=p[1],e.translate(h,v),X(e,t,i.scale)}e.beginPath(),e.moveTo(n[0][0]-h,n[0][1]-v);for(var g=1;g<n.length;g++)e.lineTo(n[g][0]-h,n[g][1]-v);t.declarations.fill&&e.fill(),t.declarations.stroke&&e.stroke(),e.restore(),(t.declarations.content||t.declarations.size||t.declarations.path||t.declarations.icon)&&(e.save(),ee(e,t,r(n),a,i),e.restore())}}var ie=function(e){Object(S.a)(n,e);var t=Object(M.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).canvas=e,r}return Object(p.a)(n,[{key:"clear",value:function(e){var t=e.width,n=e.height;this.canvas.width=t,this.canvas.height=n}},{key:"renderRule",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=this.canvas.getContext("2d");a.save(),Object(E.a)(Object(w.a)(n.prototype),"renderRule",this).call(this,e,t,r),a.restore()}},{key:"globalSetup",value:function(e,t){var n=e.scale,r=this.canvas.getContext("2d");if(t.declarations.opacity&&(r.globalAlpha=+t.declarations.opacity),"relative"===t.declarations.position){var a=(parseFloat(t.declarations.top)||0)*n,i=(parseFloat(t.declarations.left)||0)*n;r.translate(i,a)}}},{key:"renderPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.canvas.getContext("2d");ee(a,t,n,r,e)}},{key:"renderAreaLine",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=this.canvas.getContext("2d");ae(i,t,n,r,a,e)}},{key:"measureText",value:function(e,t,n){var r=this.canvas.getContext("2d");$(r,t,e.scale);var a=r.measureText(n),i=a.width,o=a.actualBoundingBoxDescent,c=a.actualBoundingBoxAscent;return{width:i,ascending:c,descending:o,height:c+o}}}]),n}(J),oe=function(){return new Worker(n.p+"static/js/render-worker.20ac31e5.worker.js")},ce=function(e){Object(S.a)(n,e);var t=Object(M.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).canvas=e.transferControlToOffscreen(),r.worker=new oe,r.worker.postMessage({canvas:r.canvas},[r.canvas]),r}return Object(p.a)(n,[{key:"clear",value:function(e){this.canvas.width=e.width,this.canvas.height=e.height,this.worker.postMessage({method:"clear",context:e})}},{key:"renderRule",value:function(e,t,n){this.worker.postMessage({method:"renderRule",context:e,rule:t,elements:n})}}]),n}(J),se=n(13);function ue(e,t,n,r){if(0!==n.length){if(t.declarations["collision-set"]){var a=N(n),i=ne.getCollisionSystem();if(!i.add(t.declarations["collision-set"],a)){var o=t.declarations["collision-policy"]||"hide";if("hide"===o)return}}var c={type:"path"},s=0,u=0;if(t.declarations.transform){var l=r(n);s=l[0],u=l[1],c.transform=t.declarations.transform}var f=[];f.push("M ".concat((n[0][0]-s).toFixed(2)," ").concat((n[0][1]-u).toFixed(2)));for(var d=1;d<n.length;d++)f.push("L ".concat((n[d][0]-s).toFixed(2)," ").concat((n[d][1]-u).toFixed(2)));c.d=f.join(" "),e.elements.push(c),t.declarations.content||t.declarations.size||t.declarations.path||t.declarations.icon}}var le=function(e){Object(S.a)(n,e);var t=Object(M.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).layers=[],a.width=e,a.height=r,a.currentLayer=null,a}return Object(p.a)(n,[{key:"clear",value:function(){this.layers.length=0}},{key:"renderRule",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.currentLayer={elements:[]};var a=K(t);this.currentLayer.stroke=a.strokeStyle,this.currentLayer.fill=a.fillStyle||"none",de(this.currentLayer,t,e.scale),Object(E.a)(Object(w.a)(n.prototype),"renderRule",this).call(this,e,t,r),this.layers.push(this.currentLayer)}},{key:"renderAreaLine",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;ue(this.currentLayer,t,n,r,a,e)}},{key:"toString",value:function(){return this.getTextParts().join("")}},{key:"toBlob",value:function(){return new Blob(this.getTextParts())}},{key:"getTextParts",value:function(){var e=[];e.push('<svg version="1.1" viewBox="0 0 '.concat(this.width," ").concat(this.height,'" width="').concat(this.width,'" height="').concat(this.height,'" xmlns="http://www.w3.org/2000/svg">\n'));var t,n=Object(u.a)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.elements,i=Object(se.a)(r,["elements"]);e.push("<g ".concat(fe(i),">\n"));var o,c=Object(u.a)(a);try{for(c.s();!(o=c.n()).done;){var s=o.value,l=s.type,f=Object(se.a)(s,["type"]);e.push("<".concat(l," ").concat(fe(f)," />\n"))}}catch(d){c.e(d)}finally{c.f()}e.push("</g>\n")}}catch(d){n.e(d)}finally{n.f()}return e.push("</svg>"),e}}]),n}(J);function fe(e){return Object.entries(e).filter((function(e){var t=Object(f.a)(e,2);t[0];return"undefined"!==typeof t[1]})).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')})).join(" ")}function de(e,t,n){if(t.declarations.opacity&&(e.opacity=+t.declarations.opacity),"relative"===t.declarations.position){var r=(parseFloat(t.declarations.top)||0)*n,a=(parseFloat(t.declarations.left)||0)*n;e.translate=[a,r]}}var he=n(18),ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OverpassElements";Object(v.a)(this,e);var n=indexedDB.open(t);n.addEventListener("upgradeneeded",(function(e){var t=e.target.result;t.createObjectStore("nodes",{keyPath:"id"}),t.createObjectStore("elements").createIndex("selectorIndex",["selector","area","bbox"],{unique:!1})})),this.db=new Promise((function(e,t){n.addEventListener("success",(function(t){var n=t.target;e(n.result)})),n.addEventListener("error",t)}))}return Object(p.a)(e,[{key:"saveNodes",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:n=e.sent,r=n.transaction("nodes","readwrite").objectStore("nodes"),a=Object(u.a)(t);try{for(a.s();!(i=a.n()).done;)o=i.value,r.put(o)}catch(c){a.e(c)}finally{a.f()}case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNode",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){var a=n.transaction("nodes","readonly").objectStore("nodes").get(t);a.addEventListener("success",(function(t){return e(a.result)})),a.addEventListener("error",(function(e){return r(e)}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNodes",value:function(e){var t=this;return Promise.all(e.map((function(e){return t.getNode(e)})))}},{key:"getElements",value:function(e,t){var n=pe(e,t);return this.getElementsByKey(n)}},{key:"getElementsByKey",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){var a=n.transaction("elements","readonly").objectStore("elements").get(t);a.addEventListener("success",(function(t){return e(a.result)})),a.addEventListener("error",r)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return r=e.sent,e.abrupt("return",new Promise((function(e,a){var i=r.transaction("elements","readonly").objectStore("elements").index("selectorIndex"),o=IDBKeyRange.bound([n,0,"0"],[n,Number.MAX_VALUE,"999999999999999999"]),c=i.openKeyCursor(o),s=0,u=9*V(t);c.addEventListener("success",(function(r){var a=c.result;if(a){var i=a.key,o=a.primaryKey,l=i[2],f=i[1];if(s++,console.debug("Checking index #".concat(s," for ").concat(n)),U(l,t)&&f<u)return console.debug("".concat(n," found after checking ").concat(s," records")),void e(o.toString());a.continue()}else console.debug("".concat(n," not found after checking ").concat(s," records")),e(null)})),c.addEventListener("error",a)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return a=e.sent,i=pe(t,n),o=V(t),e.abrupt("return",new Promise((function(e,c){var s=a.transaction("elements","readwrite").objectStore("elements").put(Object(he.a)({selector:n,bbox:t,area:o},r),i);s.addEventListener("success",(function(){console.debug("Saved ".concat(n,"/").concat(t," to database with ").concat(r.elements.length," elements")),e()})),s.addEventListener("error",c)})));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}();function pe(e,t){var n=e.split(",").map((function(e){return(+e).toFixed(3)})).join(",");return"".concat(t,"/").concat(n)}var ge=n(27).API_ROOT,be=/^(node|way|rel(?:ation)?|area)/,me=/^(way|rel(?:ation)?|area)/,ye=function(){function e(t){Object(v.a)(this,e),this.elements=new Map,this.bbox=t,this.database=new ve,this.fetchMap={},this.currentJob=Promise.resolve()}return Object(p.a)(e,[{key:"setBBox",value:function(e){U(this.bbox,e)||this.elements.clear(),this.bbox=e}},{key:"preLoadElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.jobs(Object(l.a)(s.a.mark((function e(){var r,a,i,o,c,l,d,v,p,g,m,y,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n.bbox,a={},t.forEach((function(e){return a[xe(e)]=e})),console.debug("Preloading Elements: ".concat(t.length," requested (").concat(Object.keys(a).length," unique)")),i=0,o=Object.entries(a);i<o.length;i++)c=Object(f.a)(o[i],2),l=c[0],d=c[1],be.test(d.type)||delete a[l];for(console.debug("Preloading Elements: ".concat(Object.keys(a).length," are Overpass Elements")),v=0,p=Object.keys(a);v<p.length;v++)g=p[v],n.elements.has(g)&&delete a[g];return console.debug("Preloading Elements: ".concat(Object.keys(a).length," not in HashMap")),e.next=10,Promise.all(Object.keys(a).map((function(e){return n.database.searchElements(r,e).then((function(t){t&&delete a[e]}))})));case 10:if(console.debug("Preloading Elements: ".concat(Object.keys(a).length," not in Database")),0!==Object.keys(a).length){e.next=13;break}return e.abrupt("return",0);case 13:return e.next=15,n.tryQuery(Object.values(a));case 15:return m=e.sent,console.log("Preloading Elements: Fetched ".concat(m.length," elements from Server")),y={},m.forEach((function(e){return"node"===e.type&&(y[e.id]=e)})),k={},m.forEach((function(e){return"way"===e.type&&(k[e.id]=e)})),e.next=23,Promise.all(Object.values(a).map((function(e){var t=m.filter((function(t){return b(e,t,!1)}));if("relation"===e.type){var a,i=t.slice(),o=[],c=Object(u.a)(i);try{for(c.s();!(a=c.n()).done;){var s=a.value.members.map((function(e){return e.ref}));o.push.apply(o,Object(h.a)(s.map((function(e){return k[e]}))))}}catch(j){c.e(j)}finally{c.f()}t.push.apply(t,o);for(var l=0,f=o;l<f.length;l++){var d=f[l];t.push.apply(t,Object(h.a)(d.nodes.map((function(e){return y[e]}))))}}else if("way"===e.type||"area"===e.type){var v,p=t.slice(),g=Object(u.a)(p);try{for(g.s();!(v=g.n()).done;){var x=v.value;t.push.apply(t,Object(h.a)(x.nodes.map((function(e){return y[e]}))))}}catch(j){g.e(j)}finally{g.f()}}return n.elements.set(xe(e),Promise.resolve(t)),n.database.saveElements(r,xe(e),{elements:t,cached:Date.now()})})));case 23:return e.abrupt("return",m.length);case 24:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e){var t=this;if(this.bbox.split(",").map((function(e){return+e})).some(isNaN))throw Error("Invalid BBox");var n=e.map(ke),r="[out:json][bbox];\n(".concat(n.join(""),"\n);\nout;"),a="".concat(ge,"?data=").concat(r.replace(/\s/,""),"&bbox=").concat(function(e){var t=e.split(",").map((function(e){return+e}));return"".concat(je(t[0],-180,180),",").concat(je(t[1],-90,90),",").concat(je(t[2],-180,180),",").concat(je(t[3],-90,90))}(this.bbox));return this.fetchMap[a]||(this.fetchMap[a]=fetch(a.toString()).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){return e.elements})),this.fetchMap[a].finally((function(){return delete t.fetchMap[a]}))),this.fetchMap[a]}},{key:"tryQuery",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.query(e).catch((function(r){if(429!==r)throw Error("Bad Response");if(n>0)return P(1e4).then((function(){return t.tryQuery(e,n-1)}));throw Error("Too many retries fetching data")}))}},{key:"getElements",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,i,o,c,u=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(be.test(t.type)){e.next=2;break}return e.abrupt("return");case 2:if(n=xe(t),!this.elements.has(n)){e.next=5;break}return e.abrupt("return",this.elements.get(n));case 5:return e.next=7,this.database.getElements(this.bbox,n);case 7:if(!(r=e.sent)){e.next=12;break}return a=r.elements,this.elements.set(n,Promise.resolve(a)),e.abrupt("return",a);case 12:return e.next=14,this.database.searchElements(this.bbox,n);case 14:if(!(i=e.sent)){e.next=19;break}return o=this.database.getElementsByKey(i).then((function(e){return e.elements})),this.elements.set(n,o),e.abrupt("return",o);case 19:return c=this.tryQuery([t]),this.elements.set(n,c),c.catch((function(){return u.elements.delete(n)})),c.then((function(e){u.database.saveElements(u.bbox,n,{elements:e,cached:Date.now()})})),e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"jobs",value:function(e){return this.currentJob=this.currentJob.then((function(){return e()})),this.currentJob}}]),e}();function ke(e){var t=me.test(e.type)?">;":"";return"".concat(xe(e),";").concat(t)}function xe(e){var t="area"===e.type?"way":e.type,n=Object.entries(e.tags).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return/^[<=>]+/.test(r)||"*"===r?"[".concat(n,"]"):"[".concat(n,"=").concat(r,"]")}));return"".concat(t).concat(n.join(""))}function je(e,t,n){return Math.max(t,Math.min(e,n))}function Oe(e,t){var n=Object(r.useState)(e),a=Object(f.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),i}function we(e){var t=e.value,n=e.onChange,r=Object(se.a)(e,["value","onChange"]);return a.a.createElement("textarea",Object.assign({value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){var r=e.key,a=e.currentTarget,i=e.shiftKey;if("Tab"===r){e.preventDefault();var o=a.selectionStart,c=t.lastIndexOf("\n",o-1)+1;if(i){if("    "===t.substr(c,4)){var s=t.substring(0,c)+t.substring(c+4);n(s),setTimeout((function(){return a.setSelectionRange(o-4,o-4)}),10)}}else{var u=4-(o-c)%4,l=t.substring(0,o)+"    ".substring(0,u)+t.substring(o);n(l),setTimeout((function(){return a.setSelectionRange(o+u,o+u)}),10)}}else if("Enter"===r){e.preventDefault();var f=a.selectionStart,d="{"===t[f-1],h=t.lastIndexOf("\n",f-1)+1,v=t.substring(h,f).match(/^ */),p=f+v[0].length+1+(d?4:0),g=t.substring(0,f)+"\n"+(d?"    ":"")+v[0]+t.substring(f);n(g),setTimeout((function(){return a.setSelectionRange(p,p)}),10)}}},r))}var Ee=n(17);var Me=function(){var e=d("USER_STYLE","node[amenity=post_box] {\n\tfill: black;\n\tsize: 2;\n}"),t=Object(f.a)(e,2),n=t[0],r=t[1],i=d("USER_CENTRE","7.1,50.7"),o=Object(f.a)(i,2),c=o[0],v=o[1],p=d("USER_SCALE",14),g=Object(f.a)(p,2),b=g[0],x=g[1],j=function(){var e=a.a.useState(),t=Object(f.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){navigator.geolocation.getCurrentPosition(r)}),[]),a.a.useEffect((function(){var e=navigator.geolocation.watchPosition(r);return function(){return navigator.geolocation.clearWatch(e)}}),[]),n}(),O=a.a.useRef(),w=a.a.useRef(),E=a.a.useState(null),M=Object(f.a)(E,2),S=M[0],P=M[1],T=a.a.useState(""),I=Object(f.a)(T,2),C=I[0],L=I[1],N=a.a.useState(!1),F=Object(f.a)(N,2),R=F[0],B=F[1],A=a.a.useState(0),z=Object(f.a)(A,2),_=z[0],q=z[1],W=a.a.useRef(),D=O.current||{clientWidth:1e3,clientHeight:1e3},Q=D.clientWidth,U=D.clientHeight,V=Q*devicePixelRatio,J=U*devicePixelRatio,K=Oe(c,500),Y=Oe(b,500),H=a.a.useMemo((function(){return G(K.split(",").map((function(e){return+e})),Y,[Q,U])}),[K,Y,Q,U]);w.current||(w.current=new ye(H));var Z=Oe(n,500),$=a.a.useMemo((function(){return function(e){for(var t={rules:[]},n=e.length;n>0;){var r,a,i=y(e);(r=t.rules).push.apply(r,Object(h.a)(i.rules));var o=m(e=e.substring(i.index).trim());if((a=t.rules).push.apply(a,Object(h.a)(o.mediaQueries)),(e=e.substring(o.index).trim()).length===n){console.log("Got stuck parsing style at: "+e);break}n=e.length}return t}(Z)}),[Z]);a.a.useEffect((function(){return w.current.setBBox(H)}),[H]);var X={centre:K.split(",").map((function(e){return+e})),zoom:Y,scale:devicePixelRatio,width:V,height:J},ee=k($.rules,X);if(ee.some((function(e){return"current"===e.selector.type}))){var te=(j||{coords:{}}).coords,re=te.longitude,ae=te.latitude;X.current={longitude:re,latitude:ae}}function oe(e,t){var n=K.split(",").map((function(e){return+e})),r=H.split(",").map((function(e){return+e})),a=(r[2]-r[0])/2,i=(r[3]-r[1])/2,o=[Te(n[0]+e*a),Te(n[1]+t*i)];v(o.join(","))}function se(e){if(!R){B(!0);var t=function(){return B(!1)};"png"===e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.toBlob((function(e){Pe(e,"map.png"),t&&t()}))}(O.current,t):function(e,t,n){Se.apply(this,arguments)}(X,$,w.current,t)}}return O.current&&!W.current&&(window.Worker?W.current=new ce(O.current):W.current=new ie(O.current)),Object(Ee.a)((function(){var e=!0;function t(){return(t=Object(l.a)(s.a.mark((function t(){var n,r,a,i,o,c,l,f,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P("Fetching..."),L(""),t.prev=2,t.next=5,w.current.preLoadElements(ee.map((function(e){return e.selector})));case 5:if(n=t.sent,e){t.next=8;break}return t.abrupt("return");case 8:if(!(n<0)){t.next=10;break}return t.abrupt("return");case 10:if(P(0===n?"Rendering...":"Rendering ".concat(n," elements...")),r=ee.map((function(e){return{rule:e,promise:w.current.getElements(e.selector)}})),ne.getCollisionSystem().clear(),!O.current||!W.current){t.next=46;break}if(e){t.next=16;break}return t.abrupt("return");case 16:(a=W.current).clear(X),i=0,o=Object(u.a)(r),t.prev=20,o.s();case 22:if((c=o.n()).done){t.next=36;break}return l=c.value,f="".concat(i+1,"/").concat(r.length),q(i++/r.length),console.debug("".concat(f," Loading elements for ").concat(l.rule.selector)),t.next=29,l.promise;case 29:if(d=t.sent,e){t.next=32;break}return t.abrupt("return");case 32:console.debug("".concat(f," Rendering ").concat(l.rule.selector)),a.renderRule(X,l.rule,d);case 34:t.next=22;break;case 36:t.next=41;break;case 38:t.prev=38,t.t0=t.catch(20),o.e(t.t0);case 41:return t.prev=41,o.f(),t.finish(41);case 44:q(0),console.debug("Rendered!");case 46:P(null),t.next=54;break;case 49:t.prev=49,t.t1=t.catch(2),L("Error Fetching"),P(null),console.log(t.t1);case 54:case"end":return t.stop()}}),t,null,[[2,49],[20,38,41,44]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[K,Y,ee,X]),a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"sidebar"},a.a.createElement("div",{className:"controls"},a.a.createElement("button",{onClick:function(){return oe(-1,0)}},"\u23f4"),a.a.createElement("button",{onClick:function(){return oe(1,0)}},"\u23f5"),a.a.createElement("button",{onClick:function(){return oe(0,1)}},"\u23f6"),a.a.createElement("button",{onClick:function(){return oe(0,-1)}},"\u23f7"),a.a.createElement("button",{onClick:function(){return x(+Te(b+1))}},"\u2795"),a.a.createElement("button",{onClick:function(){return x(+Te(b-1))}},"\u2796"),j&&a.a.createElement("button",{onClick:function(){return v("".concat(j.coords.longitude,",").concat(j.coords.latitude))}},"\ud83d\udccd"),a.a.createElement("button",{onClick:function(){return se("png")},disabled:R},"\u2b73 PNG"),a.a.createElement("button",{onClick:function(){return se("svg")},disabled:R},"\u2b73 SVG")),a.a.createElement("label",null,"Centre ",a.a.createElement("input",{value:c,onChange:function(e){return v(e.target.value)}})),a.a.createElement("label",null,"Zoom ",a.a.createElement("input",{type:"number",value:b,onChange:function(e){return x(+e.target.value)}})),a.a.createElement(we,{value:n,onChange:r,style:{flex:1},spellCheck:!1}),a.a.createElement("div",{className:"status-area"},S&&a.a.createElement("p",null,S),_>0&&a.a.createElement("progress",{value:_}),C&&a.a.createElement("p",{style:{color:"red"}},C))),a.a.createElement("canvas",{ref:O}))};function Se(){return(Se=Object(l.a)(s.a.mark((function e(t,n,r){var a,i,o,c,l,f,d,h,v=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=v.length>3&&void 0!==v[3]?v[3]:null,i=k(n.rules,t),o=i.map((function(e){return{rule:e,promise:r.getElements(e.selector)}})),ne.getCollisionSystem().clear(),c=new le(t.width,t.height),l=Object(u.a)(o),e.prev=6,l.s();case 8:if((f=l.n()).done){e.next=16;break}return d=f.value,e.next=12,d.promise;case 12:h=e.sent,c.renderRule(t,d.rule,h);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),l.e(e.t0);case 21:return e.prev=21,l.f(),e.finish(21);case 24:Pe(c.toBlob(),"map.svg"),a&&a();case 27:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})))).apply(this,arguments)}function Pe(e,t){var n=URL.createObjectURL(e),r=document.createElement("a");r.download=t,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}function Te(e){return e.toFixed(5).replace(/^0+|0+$/g,"")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.51974519.chunk.js.map